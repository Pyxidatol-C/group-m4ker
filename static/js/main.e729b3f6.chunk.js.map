{"version":3,"sources":["loadCSV.js","utils.js","students.js","homePage.js","promoPage.js","newGroupsPage.js","groupsPage.js","App.js","serviceWorker.js","index.js"],"names":["csv","require","_callee","c","rows","promo","iName","iGender","iLeader","iBio","iChm","iPhy","headers","_i","_headers","i","header","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","info","regenerator_default","a","wrap","_context","prev","next","output","fromString","sent","Object","keys","length","replace","toUpperCase","includes","undefined","Symbol","iterator","done","value","push","name","gender","leader","bio","chm","phy","t0","return","finish","abrupt","stop","csv2promo","s","sha256","hash","getStatsOf","ids","nbM","nbF","nbSL","nbHL","nbLeader","subjCnts","_Object$keys","subj","err","objectSpread","evaluateGroupsUsingAvg","groups","promoStats","toConsumableArray","Array","nbGroups","score","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","groupStats","Math","abs","evaluateGroupsUsingDiff","j","s1","s2","shuffle","floor","random","_ref","nbStudents","swap","scores","b","x","y","_ref2","score0","_ref3","_swap","_a","_b","_x3","_y","_ref4","key","console","log","JSON","stringify","makeGroups","HomePage","react_default","createElement","Dialog","fullScreen","className","open","this","props","isOpen","Fab","color","aria-label","onClick","variant","OpenInBrowser_default","React","Component","genderLookup","0","1","2","leadershipLookup","sciLookup","PromoPage","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","tableRef","createRef","_this2","Transition","forwardRef","ref","Slide","assign","direction","onClose","handleClose","TransitionComponent","Toolbar","IconButton","edge","Close_default","Typography","handleSave","current","state","data","map","tableData","Done_default","promoPage_StudentsTable","students","fileName","StudentsTable","_this3","TIMEOUT","columns","title","field","lookup","_this4","dist_default","options","addRowPosition","exportButton","exportAllData","filtering","pageSize","editable","onRowAdd","newData","Promise","resolve","reject","setTimeout","setState","onRowUpdate","oldData","index","indexOf","onRowDelete","splice","NewGroupsPage","focus","clicked","refUploaderText","handleMouseLeave","bind","assertThisInitialized","handleClickLeft","handleClickRight","part","click","handleGenerateGroups","maxNbGroups","type","id","accept","onChange","handleUploadGroups","hidden","newGroupsPage_OptionPanel","id_","className_","getClassName","handleFocus","handleMouseEnter","handleBlur","onMouseEnter","onMouseLeave","GroupAdd_default","disabled","canIncrementNb","incrementNb","Add_default","canDecrementNb","decrementNb","Remove_default","Snackbar","anchorOrigin","vertical","horizontal","message","OptionPanel","children","isPosEq","hasSameProfile","GroupsPage","lastSavedGroups","history","selected1","selected2","highlighted","isSaveWarningOpen","refDownload","then","handleGroupsChange","handleShowOp","shouldShowWarning","arguments","showSaveWarning","saveGroups","entries","slicedToArray","findIdsOfSameProfile","parse","concat","slice","hasPromoChanged","gp","groupsPage_GroupBox","groupNb","groupIds","handleClick","handleStudentClick","href","encodeURIComponent","download","promoName","AppBar","position","clearGroups","Button","handleShowPromo","People_default","Save_default","canUndo","handleUndo","Undo_default","canRedo","handleRedo","Redo_default","downloadGroups","GetApp_default","renderGroups","canSwap","handleSwap","SwapHoriz_default","hideSaveWarning","action","DialogContent","DialogTitle","DialogContentText","DialogActions","GroupBox","ListItem","button","isHighlighted","selected","isSelected","divider","ListItemText","primary","Card","List","String","fromCharCode","Divider","getPersonBox","STAGE","newPromo","newGroups","App","stage","refUploaderCSV","handleHomeOpen","handleChooseCSV","handleUploadCSV","handleOpOpen","handlePromoOpen","handlePromoClose","handlePromoSave","handleGroupsOpen","e","file","target","files","reader","FileReader","onload","asyncToGenerator","mark","evt","content","result","ceil","split","join","_x","apply","readAsText","decodeURIComponent","src_homePage","src_promoPage","src_newGroupsPage","src_groupsPage","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","render","src_App_0","document","getElementById","URL","process","origin","addEventListener","fetch","response","contentType","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"kYAAMA,EAAMC,EAAQ,gDAEpB,SAAAC,EAAyBC,GAAzB,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACqB5B,EAAI,CACrB6B,OAAQ,SACPC,WAAW3B,GAHhB,OASE,IARMC,EADRsB,EAAAK,KAKM1B,EAAQ,GAERO,EAAUoB,OAAOC,KAAK7B,EAAK,IAE/BS,EAAA,EAAAC,EAAgBF,EAAhBC,EAAAC,EAAAoB,OAAArB,IAAWE,EAAcD,EAAAD,IACjBG,EAASD,EAAEoB,QAAQ,KAAM,IAAIC,eACxBC,SAAS,SAAWrB,EAAOqB,SAAS,WAC7C/B,EAAQA,GAASS,EACRC,EAAOqB,SAAS,WAAarB,EAAOqB,SAAS,OACtD9B,EAAUA,GAAWQ,EACZC,EAAOqB,SAAS,UACzB7B,EAAUA,GAAWO,EACZC,EAAOqB,SAAS,OACzB5B,EAAOA,GAAQM,EACNC,EAAOqB,SAAS,OACzB3B,EAAOA,GAAQK,EACNC,EAAOqB,SAAS,SACzB1B,EAAOA,GAAQI,GAInB,IA1BFE,GAAA,EAAAC,GAAA,EAAAC,OAAAmB,EAAAZ,EAAAC,KAAA,EA0BEP,EAAmBhB,EAAnBmC,OAAAC,cAAAvB,GAAAI,EAAAD,EAAAQ,QAAAa,MAAAxB,GAAA,EAAWK,EAAcD,EAAAqB,MAEvBrC,EAAMsC,KAAK,CACTC,KAAMtB,EAAKhB,GACXuC,OAAQvB,EAAKf,GACbuC,OAAQxB,EAAKd,GACbuC,IAAKzB,EAAKb,GACVuC,IAAK1B,EAAKZ,GACVuC,IAAK3B,EAAKX,KAlChBe,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAwB,GAAAxB,EAAA,SAAAR,GAAA,EAAAC,EAAAO,EAAAwB,GAAA,QAAAxB,EAAAC,KAAA,GAAAD,EAAAC,KAAA,GAAAV,GAAA,MAAAG,EAAA+B,QAAA/B,EAAA+B,SAAA,WAAAzB,EAAAC,KAAA,IAAAT,EAAA,CAAAQ,EAAAE,KAAA,eAAAT,EAAA,eAAAO,EAAA0B,OAAA,mBAAA1B,EAAA0B,OAAA,mBAAA1B,EAAA2B,OAAA,SAsCShD,GAtCT,yBAAAqB,EAAA4B,SAAApD,EAAA,2DAyCeqD,+HCzCf,SAAArD,EAAoBsD,GAApB,OAAAjC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAA2B,OAAA,SACSI,iBAAOD,IADhB,wBAAA9B,EAAA4B,SAAApD,6BAIewD,kDCJf,SAASC,EAAWC,EAAKvD,GACvB,IAAIwD,EAAM,EAAGC,EAAM,EACfC,EAAO,EAAGC,EAAO,EACjBC,EAAW,EAETC,EAAW,CAACnB,IAAK,EAAGC,IAAK,EAAGC,IAAK,GALThC,GAAA,EAAAC,GAAA,EAAAC,OAAAmB,EAAA,IAO9B,QAAAjB,EAAAD,EAAiBwC,EAAjBrB,OAAAC,cAAAvB,GAAAI,EAAAD,EAAAQ,QAAAa,MAAAxB,GAAA,EAAsB,KACduC,EAAInD,EADUgB,EAAAqB,OAEH,MAAbc,EAAEX,OAAgBgB,IAA6B,MAAbL,EAAEX,QAAgBiB,IAExD,QAAAjD,EAAA,EAAAsD,EAAmBnC,OAAOC,KAAKiC,GAA/BrD,EAAAsD,EAAAjC,OAAArB,IAA0C,CAArC,IAAMuD,EAAID,EAAAtD,GACT2C,EAAEY,KACJF,EAASE,KACO,OAAZZ,EAAEY,GAAgBL,IAA6B,OAAZP,EAAEY,IAAgBJ,KAIzDR,EAAEV,QAAQmB,KAlBc,MAAAI,GAAAnD,GAAA,EAAAC,EAAAkD,EAAA,YAAApD,GAAA,MAAAG,EAAA+B,QAAA/B,EAAA+B,SAAA,WAAAjC,EAAA,MAAAC,GAqB9B,OAAOa,OAAAsC,EAAA,EAAAtC,CAAA,CACL6B,MAAKC,OACFI,EAFL,CAGEH,OAAMC,OACNC,aAKJ,SAASM,EAAuBC,EAAQnE,GACtC,IAAMoE,EAAad,EAAW3B,OAAA0C,EAAA,EAAA1C,CAAI2C,MAAMtE,EAAM6B,QAAQD,QAAS5B,GACzDuE,EAAWJ,EAAOtC,OACpB2C,EAAQ,EAHiCC,GAAA,EAAAC,GAAA,EAAAC,OAAA1C,EAAA,IAI7C,QAAA2C,EAAAC,EAAgBV,EAAhBjC,OAAAC,cAAAsC,GAAAG,EAAAC,EAAAtD,QAAAa,MAAAqC,GAAA,EAAwB,KAChBK,EAAaxB,EADGsB,EAAAvC,MACWrC,GACjCwE,GAASO,KAAKC,IAAIF,EAAWtB,IAAMY,EAAWZ,IAAMe,GACpDC,GAASO,KAAKC,IAAIF,EAAWrB,IAAMW,EAAWX,IAAMc,GACpDC,GAASO,KAAKC,IAAIF,EAAWlB,SAAWQ,EAAWR,SAAWW,GAC9DC,GAASO,KAAKC,IAAIF,EAAWpC,IAAM0B,EAAW1B,IAAM6B,GACpDC,GAASO,KAAKC,IAAIF,EAAWnC,IAAMyB,EAAWzB,IAAM4B,GACpDC,GAASO,KAAKC,IAAIF,EAAWlC,IAAMwB,EAAWxB,IAAM2B,GACpDC,GAASO,KAAKC,IAAIF,EAAWpB,KAAOU,EAAWV,KAAOa,GACtDC,GAASO,KAAKC,IAAIF,EAAWnB,KAAOS,EAAWT,KAAOY,IAbX,MAAAP,GAAAU,GAAA,EAAAC,EAAAX,EAAA,YAAAS,GAAA,MAAAI,EAAA/B,QAAA+B,EAAA/B,SAAA,WAAA4B,EAAA,MAAAC,GAiB7C,OAAQH,EAGV,SAASS,EAAwBd,EAAQnE,GAGvC,IAFA,IAAIwE,EAAQ,EAEH9D,EAAI,EAAGA,EAAIyD,EAAOtC,OAAQnB,IACjC,IAAK,IAAIwE,EAAI,EAAGA,EAAIxE,EAAGwE,IAAK,CAC1B,IAAMC,EAAK7B,EAAWa,EAAOzD,GAAIV,GAC3BoF,EAAK9B,EAAWa,EAAOe,GAAIlF,GAEjCwE,GAASO,KAAKC,IAAIG,EAAG3B,IAAM4B,EAAG5B,KAC9BgB,GAASO,KAAKC,IAAIG,EAAG1B,IAAM2B,EAAG3B,KAC9Be,GAASO,KAAKC,IAAIG,EAAGvB,SAAWwB,EAAGxB,UACnCY,GAASO,KAAKC,IAAIG,EAAGzC,IAAM0C,EAAG1C,KAC9B8B,GAASO,KAAKC,IAAIG,EAAGxC,IAAMyC,EAAGzC,KAC9B6B,GAASO,KAAKC,IAAIG,EAAGvC,IAAMwC,EAAGxC,KAC9B4B,GAASO,KAAKC,IAAIG,EAAGzB,KAAO0B,EAAG1B,MAC/Bc,GAASO,KAAKC,IAAIG,EAAGxB,KAAOyB,EAAGzB,MAInC,OAAQa,EAKV,SAASa,EAAQlE,GACf,IAAK,IAAIT,EAAIS,EAAEU,OAAS,EAAGnB,EAAI,EAAGA,IAAK,CACrC,IAAMwE,EAAIH,KAAKO,MAAMP,KAAKQ,UAAY7E,EAAI,IADL8E,EAEtB,CAACrE,EAAE+D,GAAI/D,EAAET,IAAvBS,EAAET,GAFkC8E,EAAA,GAE9BrE,EAAE+D,GAF4BM,EAAA,+CAOzC,SAAA3F,EAA0BG,EAAOuE,GAAjC,IAAAkB,EAAAlC,EAAAY,EAAAzD,EAAAwE,EAAAV,EAAAkB,EAAAC,EAAAxE,EAAAyE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAtF,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAME,IAJMkE,EAAazF,EAAM6B,OAEzBwD,EADM9B,EAHR5B,OAAA0C,EAAA,EAAA1C,CAGkB2C,MAAMmB,GAAY7D,SAE5BuC,EAAS,GACNzD,EAAI,EAAGA,EAAI6D,EAAU7D,IAC5ByD,EAAO7B,KAAK,IAEd,IAAS4C,EAAI,EAAGA,EAAIO,EAAYP,IAC9Bf,EAAOe,EAAIX,GAAUjC,KAAKiB,EAAI2B,IAI5BV,EAAQS,EAAwBd,EAAQnE,GACxC0F,EAAO,CAACvE,EAAG,EAAGyE,EAAG,EAAGC,EAAG,EAAGC,EAAG,GAC7BH,EAAS,CAACnB,GAhBhB,OAmBI,IAASrD,EAAI,EAAGA,EAAIoD,EAAUpD,IAC5B,IAASyE,EAAI,EAAGA,EAAIzE,EAAGyE,IACrB,IAASC,EAAI,EAAGA,EAAI1B,EAAOhD,GAAGU,OAAQgE,IACpC,IAASC,EAAI,EAAGA,EAAI3B,EAAOyB,GAAG/D,OAAQiE,IAAKC,EACV,CAAC5B,EAAOyB,GAAGE,GAAI3B,EAAOhD,GAAG0E,IAAvD1B,EAAOhD,GAAG0E,GAD8BE,EAAA,GAC1B5B,EAAOyB,GAAGE,GADgBC,EAAA,IAErCC,EAASf,EAAwBd,EAAQnE,IAChCwE,IACXA,EAAQwB,EACRN,EAAO,CAACvE,IAAGyE,IAAGC,IAAGC,MALsBG,EAOV,CAAC9B,EAAOyB,GAAGE,GAAI3B,EAAOhD,GAAG0E,IAAvD1B,EAAOhD,GAAG0E,GAP8BI,EAAA,GAO1B9B,EAAOyB,GAAGE,GAPgBG,EAAA,GAtBrD,KAmCQzB,EAAQmB,EAAOA,EAAO9D,OAAS,IAnCvC,CAAAR,EAAAE,KAAA,SAoCMkF,QAAQC,IAAIlC,GACZmB,EAAOrD,KAAKkC,GACLrD,GAtCb+E,EAsC2BR,GAAdvE,EAAGyE,EAtChBM,EAsCgBN,EAAGC,EAtCnBK,EAsCmBL,EAAGC,EAtCtBI,EAsCsBJ,EAtCtBS,EAuCqC,CAACpC,EAAOyB,GAAGE,GAAI3B,EAAOhD,GAAG0E,IAAvD1B,EAAOhD,GAAG0E,GAvCjBU,EAAA,GAuCqBpC,EAAOyB,GAAGE,GAvC/BS,EAAA,GAAAlF,EAAAE,KAAA,wBAyCMkF,QAAQC,IAAIxC,EAAuBC,EAAQnE,IAzCjDqB,EAAAE,KAAA,GA0CwB8B,EAAKsD,KAAKC,UAAU5G,IA1C5C,eA0CYwG,EA1CZnF,EAAAK,KAAAL,EAAA2B,OAAA,SA2Ca,CACLwD,MACArC,WA7CR,QAAA9C,EAAAE,KAAA,iCAAAF,EAAA4B,SAAApD,6BAoDegH,iGC1GAC,mLAnBX,OACIC,EAAA5F,EAAA6F,cAACC,EAAA,EAAD,CACIC,YAAU,EACVC,UAAU,WACVC,KAAMC,KAAKC,MAAMC,QACnBR,EAAA5F,EAAA6F,cAAA,OAAKG,UAAU,6BACbJ,EAAA5F,EAAA6F,cAACQ,EAAA,EAAD,CAAKC,MAAM,UACNC,aAAW,0BACXC,QAASN,KAAKC,MAAMK,QACpBC,QAAQ,YACXb,EAAA5F,EAAA6F,cAACa,EAAA1G,EAAD,MAJF,oCARW2G,IAAMC,2GCiB7B,IAAMC,EAAe,CAACC,EAAG,IAAKC,EAAG,IAAKC,EAAG,SACnCC,EAAmB,CAACH,EAAG,GAAIC,EAAG,OAC9BG,EAAY,CAACJ,EAAG,IAAKC,EAAG,KAAMC,EAAG,UAiBjCG,cACJ,SAAAA,EAAYhB,GAAO,IAAAiB,EAAA,OAAA5G,OAAA6G,EAAA,EAAA7G,CAAA0F,KAAAiB,IACjBC,EAAA5G,OAAA8G,EAAA,EAAA9G,CAAA0F,KAAA1F,OAAA+G,EAAA,EAAA/G,CAAA2G,GAAAK,KAAAtB,KAAMC,KAEDsB,SAAWd,IAAMe,YAHLN,wEAMV,IAAAO,EAAAzB,KACD0B,EAAajB,IAAMkB,WAAW,SAAoB1B,EAAO2B,GAC7D,OAAOlC,EAAA5F,EAAA6F,cAACkC,EAAA,EAADvH,OAAAwH,OAAA,CAAOC,UAAU,KAAKH,IAAKA,GAAS3B,MAE7C,OAAOP,EAAA5F,EAAA6F,cAACC,EAAA,EAAD,CAAQC,YAAU,EACVE,KAAMC,KAAKC,MAAMC,OACjB8B,QAAShC,KAAKC,MAAMgC,YACpBC,oBAAqBR,GAClChC,EAAA5F,EAAA6F,cAACwC,EAAA,EAAD,CAASrC,UAAW,eAClBJ,EAAA5F,EAAA6F,cAACyC,EAAA,EAAD,CAAYC,KAAK,QAAQjC,MAAM,UAAUE,QAASN,KAAKC,MAAMgC,YAAa5B,aAAW,SACnFX,EAAA5F,EAAA6F,cAAC2C,EAAAxI,EAAD,OAEF4F,EAAA5F,EAAA6F,cAAC4C,EAAA,EAAD,CAAYhC,QAAQ,KAAKT,UAAU,aAAnC,oBAGAJ,EAAA5F,EAAA6F,cAACyC,EAAA,EAAD,CAAYhC,MAAM,UACVE,QAAS,kBAAMmB,EAAKxB,MAAMuC,WAAsBf,EAAKF,SAASkB,QAAQC,MAAMC,KArC9EC,IAAI,SAAA9G,GACd,IAAIiC,EAAEzD,OAAAsC,EAAA,EAAAtC,CAAA,GACDwB,EADC,CAEJX,OAAQwF,EAAa7E,EAAEX,QACvBC,OAAQ2F,EAAiBjF,EAAEV,QAC3BC,IAAK2F,EAAUlF,EAAET,KACjBC,IAAK0F,EAAUlF,EAAER,KACjBC,IAAKyF,EAAUlF,EAAEP,OAGnB,cADOwC,EAAG8E,UACH9E,OA4BD2B,EAAA5F,EAAA6F,cAACmD,EAAAhJ,EAAD,QAGJ4F,EAAA5F,EAAA6F,cAACoD,EAAD,CACInB,IAAK5B,KAAKuB,SACVyB,SAAUhD,KAAKC,MAAM+C,SACrBC,SAAUjD,KAAKC,MAAMgD,mBA9BPxC,IAAMC,WAoCxBwC,cAGJ,SAAAA,EAAYjD,GAAO,IAAAkD,EAvEDR,EAuEC,OAAArI,OAAA6G,EAAA,EAAA7G,CAAA0F,KAAAkD,IACjBC,EAAA7I,OAAA8G,EAAA,EAAA9G,CAAA0F,KAAA1F,OAAA+G,EAAA,EAAA/G,CAAA4I,GAAA5B,KAAAtB,KAAMC,KAHRmD,QAAU,IAIRD,EAAKT,MAAQ,CACXW,QAAS,CACP,CAACC,MAAO,OAAQC,MAAO,QACvB,CAACD,MAAO,SAAUC,MAAO,SAAUC,OAAQ7C,GAC3C,CAAC2C,MAAO,aAAcC,MAAO,SAAUC,OAAQzC,GAC/C,CAACuC,MAAO,YAAaC,MAAO,MAAOC,OAAQxC,GAC3C,CAACsC,MAAO,YAAaC,MAAO,MAAOC,OAAQxC,GAC3C,CAACsC,MAAO,YAAaC,MAAO,MAAOC,OAAQxC,IAE7C2B,MAlFcA,EAkFG1C,EAAM+C,SAjFpBL,EAAKC,IAAI,SAAA9G,GACd,OAAOxB,OAAAsC,EAAA,EAAAtC,CAAA,GACFwB,EADL,CAEEX,OAAqB,MAAbW,EAAEX,OAAiB,EAAiB,MAAbW,EAAEX,OAAiB,EAAI,EACtDC,YAAqBR,IAAbkB,EAAEV,QAAyBU,EAAEV,OAAa,EAAJ,EAC9CC,IAAe,OAAVS,EAAET,IAAe,EAAc,OAAVS,EAAET,IAAe,EAAI,EAC/CC,IAAe,OAAVQ,EAAER,IAAe,EAAc,OAAVQ,EAAER,IAAe,EAAI,EAC/CC,IAAe,OAAVO,EAAEP,IAAe,EAAc,OAAVO,EAAEP,IAAe,EAAI,QA+DhC4H,wEAeV,IAAAM,EAAAzD,KACP,OAAON,EAAA5F,EAAA6F,cAAC+D,EAAA5J,EAAD,CACHwJ,MAAOtD,KAAKC,MAAMgD,SAClBI,QAASrD,KAAK0C,MAAMW,QACpBV,KAAM3C,KAAK0C,MAAMC,KACjBgB,QAAS,CACPC,eAAgB,QAChBC,cAAc,EACdC,eAAe,EACfC,WAAW,EACXC,SAAU,IAEZC,SAAU,CACRC,SAAU,SAAAC,GAAO,OACb,IAAIC,QAAQ,SAACC,EAASC,GACpBC,WAAW,WAEP,IAAM5B,EAAOc,EAAKf,MAAMC,KACxBA,EAAK1H,KAAKkJ,GACVV,EAAKe,SAAS,CAAC7B,QAAO,kBAAM0B,MAE9BA,KACCZ,EAAKL,YAEdqB,YAAa,SAACN,EAASO,GAAV,OACT,IAAIN,QAAQ,SAACC,EAASC,GACpBC,WAAW,WAEP,IAAM5B,EAAOc,EAAKf,MAAMC,KAClBgC,EAAQhC,EAAKiC,QAAQF,GAC3B/B,EAAKgC,GAASR,EACdV,EAAKe,SAAS,CAAC7B,QAAO,kBAAM0B,MAE9BA,KACCZ,EAAKL,YAEdyB,YAAa,SAAAH,GAAO,OAChB,IAAIN,QAAQ,SAACC,EAASC,GACpBC,WAAW,WAEP,IAAI5B,EAAOc,EAAKf,MAAMC,KAChBgC,EAAQhC,EAAKiC,QAAQF,GAC3B/B,EAAKmC,OAAOH,EAAO,GACnBlB,EAAKe,SAAS,CAAC7B,QAAO,kBAAM0B,MAE9BA,KACCZ,EAAKL,sBAhEI3C,IAAMC,WAuEnBO,kFC/IT8D,eACJ,SAAAA,EAAY9E,GAAO,IAAAiB,EAAA,OAAA5G,OAAA6G,EAAA,EAAA7G,CAAA0F,KAAA+E,IACjB7D,EAAA5G,OAAA8G,EAAA,EAAA9G,CAAA0F,KAAA1F,OAAA+G,EAAA,EAAA/G,CAAAyK,GAAAzD,KAAAtB,KAAMC,KACDyC,MAAQ,CACXsC,MAAO,GACPC,QAAS,GACT/H,SAAU+C,EAAM/C,UAGlBgE,EAAKgE,gBAAkBzE,IAAMe,YAC7BN,EAAKiE,iBAAmBjE,EAAKiE,iBAAiBC,KAAtB9K,OAAA+K,EAAA,EAAA/K,CAAA4G,IACxBA,EAAKoE,gBAAkBpE,EAAKoE,gBAAgBF,KAArB9K,OAAA+K,EAAA,EAAA/K,CAAA4G,IACvBA,EAAKqE,iBAAmBrE,EAAKqE,iBAAiBH,KAAtB9K,OAAA+K,EAAA,EAAA/K,CAAA4G,IAXPA,gFAcF8D,GACfhF,KAAKwE,SAAS,CACZQ,QACAC,QAAgC,SAAvBjF,KAAK0C,MAAMuC,SAA6D,KAAvCjF,KAAKkF,gBAAgBzC,QAAQzH,MAAe,GAAKgF,KAAK0C,MAAMuC,qDAKxGjF,KAAKwE,SAAS,CACZQ,MAAO,0CAIEQ,GACX,IAAI1F,EASJ,OAPEA,EADuB,KAArBE,KAAK0C,MAAMsC,MACD,GAEAQ,IAASxF,KAAK0C,MAAMsC,MAAQ,WAAa,UAEnDhF,KAAK0C,MAAMuC,UAAYO,IACzB1F,EAAY,mBAEPA,4CAGS,IAAA2B,EAAAzB,KACZA,KAAK0C,MAAMuC,SACfjF,KAAKwE,SACD,CAACS,QAAS,QACV,kBAAMxD,EAAKyD,gBAAgBzC,QAAQgD,qDAItB,IAAAtC,EAAAnD,KACbA,KAAK0C,MAAMuC,UACfjF,KAAKwE,SACD,CAACS,QAAS,UAEdV,WACI,kBAAMpB,EAAKlD,MAAMyF,qBAAqBvC,EAAKT,MAAMxF,WACjD,+CAMJ,OAAO8C,KAAK0C,MAAMxF,SAAW,GAAK8C,KAAKC,MAAM0F,qDAI7C,OAAO3F,KAAK0C,MAAMxF,SAAW,EAAI,wCAIjC8C,KAAKwE,SAAS,CAACtH,SAAU8C,KAAK0C,MAAMxF,SAAW,0CAI/C8C,KAAKwE,SAAS,CAACtH,SAAU8C,KAAK0C,MAAMxF,SAAW,qCAGxC,IAAAuG,EAAAzD,KACP,OAAON,EAAA5F,EAAA6F,cAACC,EAAA,EAAD,CAAQC,YAAU,EACVE,KAAMC,KAAKC,MAAMC,QAC9BR,EAAA5F,EAAA6F,cAAA,SAAOiG,KAAK,OACLC,GAAG,OACHjE,IAAK5B,KAAKkF,gBACVY,OAAO,aACPC,SAAU/F,KAAKC,MAAM+F,mBACrBC,QAAM,IACbvG,EAAA5F,EAAA6F,cAAA,OAAKkG,GAAG,gBACNnG,EAAA5F,EAAA6F,cAACuG,GAAD,CAAaC,IAAI,YACJC,WAAY,aAAepG,KAAKqG,aAAa,QAC7CC,YAAa,kBAAM7C,EAAK8C,iBAAiB,SACzCC,WAAYxG,KAAKmF,iBAAiBC,KAAKpF,OAClDN,EAAA5F,EAAA6F,cAACa,EAAA1G,EAAD,CAAmBgG,UAAU,qBACV2G,aAAc,kBAAMhD,EAAK8C,iBAAiB,SAC1CG,aAAc1G,KAAKmF,iBACnB7E,QAASN,KAAKsF,kBACjC5F,EAAA5F,EAAA6F,cAAA,MAAIG,UAAU,WAAd,kBAIFJ,EAAA5F,EAAA6F,cAACuG,GAAD,CAAaC,IAAI,cACJC,WAAY,aAAepG,KAAKqG,aAAa,UACxD3G,EAAA5F,EAAA6F,cAACgH,EAAA7M,EAAD,CAAcgG,UAAU,qBACV2G,aAAc,kBAAMhD,EAAK8C,iBAAiB,UAC1CG,aAAc1G,KAAKmF,iBACnB7E,QAASN,KAAKuF,mBAC5B7F,EAAA5F,EAAA6F,cAAA,MAAIG,UAAU,YAAd,YACYE,KAAK0C,MAAMxF,SADvB,WAGAwC,EAAA5F,EAAA6F,cAAA,OAAKG,UAAW,cACdJ,EAAA5F,EAAA6F,cAACQ,EAAA,EAAD,CAAKC,MAAM,UACNwG,UAAW5G,KAAK6G,iBAChBvG,QAAS,kBAAMmD,EAAKqD,gBACvBpH,EAAA5F,EAAA6F,cAACoH,GAAAjN,EAAD,OAEF4F,EAAA5F,EAAA6F,cAACQ,EAAA,EAAD,CAAKC,MAAM,YACNwG,UAAW5G,KAAKgH,iBAChB1G,QAAS,kBAAMmD,EAAKwD,gBACvBvH,EAAA5F,EAAA6F,cAACuH,GAAApN,EAAD,UAKR4F,EAAA5F,EAAA6F,cAACwH,EAAA,EAAD,CACIC,aAAc,CACZC,SAAU,SACVC,WAAY,SAEdvH,KAA6B,UAAvBC,KAAK0C,MAAMuC,QACjBsC,QACE7H,EAAA5F,EAAA6F,cAAA,wCAjIgBc,IAAMC,WA2I5B8G,oLAEF,OAAO9H,EAAA5F,EAAA6F,cAAA,OAAKkG,GAAI7F,KAAKC,MAAMkG,IACfrG,UAAWE,KAAKC,MAAMmG,YAChC1G,EAAA5F,EAAA6F,cAAA,OAAKG,UAAU,YACbJ,EAAA5F,EAAA6F,cAAA,OAAKG,UAAU,YACZE,KAAKC,MAAMwH,mBANIhH,IAAMC,WAajBqE,mQCtIf,SAAS2C,GAAQlJ,EAAGC,GAClB,OAAU,OAAND,GAAoB,OAANC,EACTD,IAAMC,EAERD,EAAEnF,IAAMoF,EAAEpF,GAAKmF,EAAEX,IAAMY,EAAEZ,EAGlC,SAAS8J,GAAe7J,EAAIC,GAC1B,OAAOD,EAAG3C,SAAW4C,EAAG5C,QACjB2C,EAAG1C,SAAW2C,EAAG3C,QACjB0C,EAAGzC,MAAQ0C,EAAG1C,KACdyC,EAAGxC,MAAQyC,EAAGzC,KACdwC,EAAGvC,MAAQwC,EAAGxC,QAIjBqM,eACJ,SAAAA,EAAY3H,GAAO,IAAAiB,EAAA,OAAA5G,OAAA6G,EAAA,EAAA7G,CAAA0F,KAAA4H,IACjB1G,EAAA5G,OAAA8G,EAAA,EAAA9G,CAAA0F,KAAA1F,OAAA+G,EAAA,EAAA/G,CAAAsN,GAAAtG,KAAAtB,KAAMC,KACDyC,MAAQ,CACXmF,gBAAiB3G,EAAKjB,MAAMnD,OAC5BgL,QAAS,CAAC5G,EAAKjB,MAAMnD,QACrBzD,EAAG,EACH0O,UAAW,KACXC,UAAW,KACXC,YAAa,GACbC,mBAAmB,GAGrBhH,EAAKiH,YAAc1H,IAAMe,YAEzBxF,EAAKsD,KAAKC,UAAU2B,EAAKjB,MAAMtH,QAAQyP,KACnC,SAACjJ,GACC+B,EAAKsD,SAAS,CACZrF,UAjBS+B,wEAwBjB,OAAOlB,KAAK0C,MAAMoF,QAAQ9H,KAAK0C,MAAMrJ,yCAKrC2G,KAAKC,MAAMoI,mBAAmB,CAACvL,OAAQ,GAAIqC,IAAK,KAChDa,KAAKC,MAAMqI,oDAGwB,IAA1BC,IAA0BC,UAAAhO,OAAA,QAAAI,IAAA4N,UAAA,KAAAA,UAAA,GACnCxI,KAAKC,MAAMoI,mBAAmBrI,KAAKlD,UACnCkD,KAAKwE,SAAS,CACZqD,gBAAiB7H,KAAKlD,WAEpByL,GACFvI,KAAKyI,4DAKPzI,KAAKwE,SAAS,CACZ0D,mBAAmB,8CAKrBlI,KAAKwE,SAAS,CACZ0D,mBAAmB,6CAKrBlI,KAAK0I,YAAW,GAChB1I,KAAKmI,YAAY1F,QAAQgD,qDAGNI,GACnB,IAAM/H,EAAKkC,KAAKC,MAAMtH,MAAMkN,GACtB3J,EAAM,GAFW3C,GAAA,EAAAC,GAAA,EAAAC,OAAAmB,EAAA,IAGvB,QAAAjB,EAAAD,EAAsBsG,KAAKC,MAAMtH,MAAMgQ,UAAvC9N,OAAAC,cAAAvB,GAAAI,EAAAD,EAAAQ,QAAAa,MAAAxB,GAAA,EAAkD,KAAAqF,EAAAjF,EAAAqB,MAAA0D,EAAApE,OAAAsO,GAAA,EAAAtO,CAAAsE,EAAA,GAAtCvF,EAAsCqF,EAAA,GAAnCX,EAAmCW,EAAA,GAC5CrF,IAAMwM,GACJ8B,GAAe7J,EAAIC,IACrB7B,EAAIjB,KAAK5B,IANQ,MAAAsD,GAAAnD,GAAA,EAAAC,EAAAkD,EAAA,YAAApD,GAAA,MAAAG,EAAA+B,QAAA/B,EAAA+B,SAAA,WAAAjC,EAAA,MAAAC,GAUvB,OAAOyC,6CAGU7C,EAAGwE,GACpB,IAEIkK,EAAWC,EAgBXC,EAlBEzJ,EAAI,CAACnF,IAAGwE,KACRgI,EAAK7F,KAAKlD,SAASA,OAAOzD,GAAGwE,GAEN,OAAzBmC,KAAK0C,MAAMqF,WACbA,EAAYvJ,EACZwJ,EAAY,MACHN,GAAQlJ,EAAGwB,KAAK0C,MAAMqF,YAC/BA,EAAY,KACZC,EAAY,MAERhI,KAAK0C,MAAMuF,YAAYtN,SAASkL,IAClCkC,EAAY/H,KAAK0C,MAAMqF,UACvBC,EAAYxJ,IAEZuJ,EAAYvJ,EACZwJ,EAAY,MAKdC,EADgB,OAAdF,GAAoC,OAAdC,EACVhI,KAAK6I,qBAAqB7I,KAAKlD,SAASA,OAAOiL,EAAU1O,GAAG0O,EAAUlK,IAEtE,GAGhBmC,KAAKwE,SAAS,CACZuD,YACAC,YACAC,kDAKF,OAAgC,OAAzBjI,KAAK0C,MAAMqF,WAA+C,OAAzB/H,KAAK0C,MAAMsF,4CAInD,OAAOhI,KAAK0C,MAAMrJ,EAAI,GAAK,oCAI3B,OAAO2G,KAAK0C,MAAMrJ,EAAI,GAAK2G,KAAK0C,MAAMoF,QAAQtN,OAAS,uCAIvDwF,KAAKwE,SAAS,CACZnL,EAAG2G,KAAK0C,MAAMrJ,EAAI,yCAKpB2G,KAAKwE,SAAS,CACZnL,EAAG2G,KAAK0C,MAAMrJ,EAAI,yCAKpB,IAAMyD,EAASwC,KAAKwJ,MAAMxJ,KAAKC,UAAUS,KAAKlD,SAASA,SACjDhD,EAAIkG,KAAK0C,MAAMqF,UACfxJ,EAAIyB,KAAK0C,MAAMsF,UAHV9I,EAI4B,CAACpC,EAAOyB,EAAElF,GAAGkF,EAAEV,GAAIf,EAAOhD,EAAET,GAAGS,EAAE+D,IAAvEf,EAAOhD,EAAET,GAAGS,EAAE+D,GAJJqB,EAAA,GAIQpC,EAAOyB,EAAElF,GAAGkF,EAAEV,GAJtBqB,EAAA,GAKX,IAAM7F,EAAI2G,KAAK0C,MAAMrJ,EAAI,EACnByO,EAAO,GAAAiB,OAAAzO,OAAA0C,EAAA,EAAA1C,CAAO0F,KAAK0C,MAAMoF,QAAQkB,MAAM,EAAG3P,IAAnC,CAAuC,CAAC8F,IAAKa,KAAKlD,SAASqC,IAAKrC,YAC7EkD,KAAKwE,SAAS,CACZnL,IACAyO,UACAG,YAAa,+CAKf,OAAOjI,KAAKlD,SAASqC,MAAQa,KAAK0C,MAAMvD,2CAG3B,IAAAsC,EAAAzB,KACb,OAAIA,KAAKiJ,kBAA0B,GAE/BvJ,EAAA5F,EAAA6F,cAAA,OAAKG,UAAU,iBACXE,KAAKlD,SAASA,OAAO8F,IAAI,SAACsG,EAAI7P,GAAL,OACvBqG,EAAA5F,EAAA6F,cAACwJ,GAAD,CACIhK,IAAKG,KAAKC,UAAU2J,GACpBE,QAAS/P,EACTgQ,SAAUH,EACVvQ,MAAO8I,EAAKxB,MAAMtH,MAClBoP,UAAWtG,EAAKiB,MAAMqF,UACtBC,UAAWvG,EAAKiB,MAAMsF,UACtBC,YAAaxG,EAAKiB,MAAMuF,YACxBqB,YAAa7H,EAAK8H,mBAAmBnE,KAAK3D,yCAQxD,OAAO/B,EAAA5F,EAAA6F,cAACC,EAAA,EAAD,CAAQC,YAAU,EACVE,KAAMC,KAAKC,MAAMC,QAC9BR,EAAA5F,EAAA6F,cAAA,KACIsG,QAAM,EACNrE,IAAK5B,KAAKmI,YACVqB,KAAI,mCAAAT,OAAqCU,mBAAmBnK,KAAKC,UAAUS,KAAKlD,YAChF4M,SAAQ,GAAAX,OAAK/I,KAAKC,MAAM0J,UAAhB,gBAETrK,KAAKC,UAAUS,KAAKlD,WAEvB4C,EAAA5F,EAAA6F,cAACiK,GAAA,EAAD,CAAQC,SAAS,UACfnK,EAAA5F,EAAA6F,cAACwC,EAAA,EAAD,CAASrC,UAAU,eACjBJ,EAAA5F,EAAA6F,cAACyC,EAAA,EAAD,CAAYhC,MAAM,UACNE,QAASN,KAAK8J,YAAY1E,KAAKpF,OACzCN,EAAA5F,EAAA6F,cAAC2C,EAAAxI,EAAD,OAGF4F,EAAA5F,EAAA6F,cAAC4C,EAAA,EAAD,CAAYhC,QAAQ,KAAKT,UAAU,aAAnC,YAEEJ,EAAA5F,EAAA6F,cAACoK,GAAA,EAAD,CAAQ3J,MAAM,UAAUE,QAASN,KAAKC,MAAM+J,iBAC1CtK,EAAA5F,EAAA6F,cAAC4C,EAAA,EAAD,CAAYhC,QAAQ,KACRT,UAAU,mBADtB,YAIAJ,EAAA5F,EAAA6F,cAACsK,GAAAnQ,EAAD,QAIJ4F,EAAA5F,EAAA6F,cAACyC,EAAA,EAAD,CAAYhC,MAAM,UACNwG,SAAUtH,KAAKC,UAAUS,KAAK0C,MAAMmF,mBAAqBvI,KAAKC,UAAUS,KAAKlD,UAC7EwD,QAASN,KAAK0I,WAAWtD,KAAKpF,OACxCN,EAAA5F,EAAA6F,cAACuK,GAAApQ,EAAD,OAEF4F,EAAA5F,EAAA6F,cAACyC,EAAA,EAAD,CAAYhC,MAAM,UACNwG,UAAW5G,KAAKmK,UAChB7J,QAASN,KAAKoK,WAAWhF,KAAKpF,OAExCN,EAAA5F,EAAA6F,cAAC0K,GAAAvQ,EAAD,OAEF4F,EAAA5F,EAAA6F,cAACyC,EAAA,EAAD,CAAYhC,MAAM,UACNwG,UAAW5G,KAAKsK,UAChBhK,QAASN,KAAKuK,WAAWnF,KAAKpF,OAExCN,EAAA5F,EAAA6F,cAAC6K,GAAA1Q,EAAD,OAGF4F,EAAA5F,EAAA6F,cAACyC,EAAA,EAAD,CAAYhC,MAAM,UAAUE,QAASN,KAAKyK,eAAerF,KAAKpF,OAC5DN,EAAA5F,EAAA6F,cAAC+K,GAAA5Q,EAAD,SAKLkG,KAAK2K,eAENjL,EAAA5F,EAAA6F,cAAA,OAAKG,UAAU,qBACbJ,EAAA5F,EAAA6F,cAACQ,EAAA,EAAD,CACII,QAAQ,WACRH,MAAM,YACNwG,UAAW5G,KAAK4K,UAChBtK,QAASN,KAAK6K,WAAWzF,KAAKpF,OAEhCN,EAAA5F,EAAA6F,cAACmL,GAAAhR,EAAD,MANF,UAWF4F,EAAA5F,EAAA6F,cAACwH,EAAA,EAAD,CACIC,aAAc,CACZC,SAAU,MACVC,WAAY,SAEdvH,KAAMC,KAAK0C,MAAMwF,kBACjBlG,QAAShC,KAAK+K,gBAAgB3F,KAAKpF,MACnCuH,QACE7H,EAAA5F,EAAA6F,cAAA,0DAEQD,EAAA5F,EAAA6F,cAAC+K,GAAA5Q,EAAD,MAFR,4BAKFkR,OACEtL,EAAA5F,EAAA6F,cAACoK,GAAA,EAAD,CAAQ3J,MAAM,YAAYE,QAASN,KAAK+K,gBAAgB3F,KAAKpF,OAA7D,QAKNN,EAAA5F,EAAA6F,cAACC,EAAA,EAAD,CAAQG,KAAMC,KAAKiJ,mBACjBvJ,EAAA5F,EAAA6F,cAACsL,GAAA,EAAD,KACEvL,EAAA5F,EAAA6F,cAACuL,GAAA,EAAD,0CAGAxL,EAAA5F,EAAA6F,cAACwL,GAAA,EAAD,wHAGEzL,EAAA5F,EAAA6F,cAAA,WAHF,qEAMAD,EAAA5F,EAAA6F,cAACyL,GAAA,EAAD,KACE1L,EAAA5F,EAAA6F,cAACoK,GAAA,EAAD,CAAQzJ,QAASN,KAAKC,MAAM+J,gBAAiB5J,MAAM,WAAnD,iBAGAV,EAAA5F,EAAA6F,cAACoK,GAAA,EAAD,CAAQzJ,QAASN,KAAK8J,YAAY1E,KAAKpF,MAAOI,MAAM,aAApD,sBA9QaK,IAAMC,WA0RzB2K,sLACOxN,GACT,IAAMW,EAAI,CAACnF,EAAG2G,KAAKC,MAAMmJ,QAASvL,KAClC,OAAO6J,GAAQlJ,EAAGwB,KAAKC,MAAM8H,YAAcL,GAAQlJ,EAAGwB,KAAKC,MAAM+H,iDAGrDnC,GACZ,OAAO7F,KAAKC,MAAMgI,YAAYtN,SAASkL,wCAG5BA,EAAIhI,GAAG,IAAAsF,EAAAnD,KACZ9E,EAAO8E,KAAKC,MAAMtH,MAAMkN,GAAI3K,KAClC,OACIwE,EAAA5F,EAAA6F,cAAC2L,GAAA,EAAD,CACIC,QAAM,EACNzL,UAAWE,KAAKwL,cAAc3F,GAAM,kBAAoB,GACxD4F,SAAUzL,KAAK0L,WAAW7N,GAC1BsB,IAAK0G,EAAK,IAAMhI,EAChB8N,QAAS9N,IAAMmC,KAAKC,MAAMoJ,SAAS7O,OAAS,EAC5C8F,QAAS,kBAAM6C,EAAKlD,MAAMqJ,YAAYnG,EAAKlD,MAAMmJ,QAASvL,KAE5D6B,EAAA5F,EAAA6F,cAACiM,GAAA,EAAD,CAAcC,QAAS3Q,sCAKtB,IAAAuI,EAAAzD,KACP,OACIN,EAAA5F,EAAA6F,cAACmM,GAAA,EAAD,CAAMhM,UAAU,WACdJ,EAAA5F,EAAA6F,cAACoM,GAAA,EAAD,KACErM,EAAA5F,EAAA6F,cAAC4C,EAAA,EAAD,CAAYhC,QAAQ,KAAKT,UAAU,iBAAnC,SACSkM,OAAOC,aAAa,GAAKjM,KAAKC,MAAMmJ,UAE7C1J,EAAA5F,EAAA6F,cAACuM,GAAA,EAAD,CAAS3L,QAAQ,WAChBP,KAAKC,MAAMoJ,SAASzG,IAAI,SAACiD,EAAIhI,GAAL,OAAW4F,EAAK0I,aAAatG,EAAIhI,cAlC/C4C,IAAMC,WAyCdkH,MCpWTwE,GAAQ,CACZC,SAAU,EACV1T,MAAO,EACP2T,UAAW,EACXxP,OAAQ,GAyJKyP,eArJb,SAAAA,EAAYtM,GAAO,IAAAiB,EAAA,OAAA5G,OAAA6G,EAAA,EAAA7G,CAAA0F,KAAAuM,IACjBrL,EAAA5G,OAAA8G,EAAA,EAAA9G,CAAA0F,KAAA1F,OAAA+G,EAAA,EAAA/G,CAAAiS,GAAAjL,KAAAtB,KAAMC,KAEDyC,MAAQ,CACXxF,SAAU,GACVJ,OAAQ,CAACqC,IAAK,GAAIrC,OAAQ,IAC1BmG,SAAU,cACVtK,MAAO,GACP6T,MAAOJ,GAAMC,UAGfnL,EAAKuL,eAAiBhM,IAAMe,YAC5BN,EAAKwL,eAAiBxL,EAAKwL,eAAetH,KAApB9K,OAAA+K,EAAA,EAAA/K,CAAA4G,IACtBA,EAAKyL,gBAAkBzL,EAAKyL,gBAAgBvH,KAArB9K,OAAA+K,EAAA,EAAA/K,CAAA4G,IACvBA,EAAK0L,gBAAkB1L,EAAK0L,gBAAgBxH,KAArB9K,OAAA+K,EAAA,EAAA/K,CAAA4G,IACvBA,EAAK2L,aAAe3L,EAAK2L,aAAazH,KAAlB9K,OAAA+K,EAAA,EAAA/K,CAAA4G,IACpBA,EAAK4L,gBAAkB5L,EAAK4L,gBAAgB1H,KAArB9K,OAAA+K,EAAA,EAAA/K,CAAA4G,IACvBA,EAAK6L,iBAAmB7L,EAAK6L,iBAAiB3H,KAAtB9K,OAAA+K,EAAA,EAAA/K,CAAA4G,IACxBA,EAAK8L,gBAAkB9L,EAAK8L,gBAAgB5H,KAArB9K,OAAA+K,EAAA,EAAA/K,CAAA4G,IACvBA,EAAKwE,qBAAuBxE,EAAKwE,qBAAqBN,KAA1B9K,OAAA+K,EAAA,EAAA/K,CAAA4G,IAC5BA,EAAK8E,mBAAqB9E,EAAK8E,mBAAmBZ,KAAxB9K,OAAA+K,EAAA,EAAA/K,CAAA4G,IAC1BA,EAAK+L,iBAAmB/L,EAAK+L,iBAAiB7H,KAAtB9K,OAAA+K,EAAA,EAAA/K,CAAA4G,IACxBA,EAAKmH,mBAAqBnH,EAAKmH,mBAAmBjD,KAAxB9K,OAAA+K,EAAA,EAAA/K,CAAA4G,IAtBTA,gFA0BjBlB,KAAKyM,eAAehK,QAAQzH,MAAQ,GACpCgF,KAAKwE,SAAS,CACZgI,MAAOJ,GAAMC,qDAKfrM,KAAKyM,eAAehK,QAAQgD,gDAGdyH,GAAG,IAAAzL,EAAAzB,KACjB,IACE,IAAImN,EAAOD,EAAEE,OAAOC,MAAM,GACtBC,EAAS,IAAIC,WACjBD,EAAOE,OAAP,eAAArP,EAAA7D,OAAAmT,EAAA,EAAAnT,CAAAT,EAAAC,EAAA4T,KAAgB,SAAAlV,EAAOmV,GAAP,IAAAC,EAAAjV,EAAA,OAAAkB,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACV0T,EAAUD,EAAIP,OAAOS,OADX7T,EAAAE,KAAA,EAEI2B,EAAU+R,GAFd,OAEVjV,EAFUqB,EAAAK,KAGdoH,EAAK+C,SAAS,CACZ7L,QACAuE,SAAUQ,KAAKoQ,KAAKnV,EAAM6B,OAAS,GACnCyI,SAAUkK,EAAKjS,KAAK6S,MAAM,KAAK/E,MAAM,GAAI,GAAGgF,KAAK,MAChDvM,EAAKqL,iBAPM,wBAAA9S,EAAA4B,SAAApD,MAAhB,gBAAAyV,GAAA,OAAA9P,EAAA+P,MAAAlO,KAAAwI,YAAA,GASA8E,EAAOa,WAAWhB,GAClB,MAAOD,GACP9N,QAAQC,IAAI6N,8CAKdlN,KAAKwE,SAAS,CAACgI,MAAOJ,GAAMzT,+CAI5BqH,KAAKwE,SAAS,CAACgI,MAAOJ,GAAME,uDAIY,IAApCtM,KAAK0C,MAAM5F,OAAOA,OAAOtC,OAC3BwF,KAAK6M,eAEL7M,KAAKiN,2DAIOtU,GACdqH,KAAKwE,SAAS,CAAC7L,UACfqH,KAAK+M,wGAGoB7P,yFACJsC,EAAWQ,KAAK0C,MAAM/J,MAAOuE,UAA5CJ,SACNkD,KAAKwE,SAAS,CACZ1H,SACAI,YACC8C,KAAKiN,gKAGSC,GAAG,IAAA/J,EAAAnD,KACpB,IACE,IAAImN,EAAOD,EAAEE,OAAOC,MAAM,GACtBC,EAAS,IAAIC,WACjBD,EAAOE,OAAS,SAACG,GACf,IAAM7Q,EAAQwC,KAAKwJ,MAAMsF,mBAAmBT,EAAIP,OAAOS,SAEvD1K,EAAKqB,SAAS,CACZ1H,UACCqG,EAAK8J,mBAGVK,EAAOa,WAAWhB,GAClB,MAAOD,GACP9N,QAAQC,IAAI6N,+CAKdlN,KAAKwE,SAAS,CAACgI,MAAOJ,GAAMtP,oDAGXA,GACjBkD,KAAKwE,SAAS,CAAC1H,4CAIf,OACI4C,EAAA5F,EAAA6F,cAAA,OAAKG,UAAU,OAEbJ,EAAA5F,EAAA6F,cAAA,SAAOiG,KAAK,OACLC,GAAG,OACHjE,IAAK5B,KAAKyM,eACV3G,OAAO,WACPC,SAAU/F,KAAK4M,gBACf3G,QAAM,IAEbvG,EAAA5F,EAAA6F,cAAC0O,EAAD,CAAUlP,IAAK,OAASa,KAAK0C,MAAM8J,MACzBtM,OAAQF,KAAK0C,MAAM8J,QAAUJ,GAAMC,SACnC/L,QAASN,KAAK2M,kBACxBjN,EAAA5F,EAAA6F,cAAC2O,EAAD,CAAWnP,IAAK,QAAUa,KAAK0C,MAAM8J,MAC1BxJ,SAAUhD,KAAK0C,MAAM/J,MACrBsK,SAAUjD,KAAK0C,MAAMO,SACrB/C,OAAQF,KAAK0C,MAAM8J,QAAUJ,GAAMzT,MACnCsJ,YAAajC,KAAK0M,eAClBlK,WAAYxC,KAAKgN,kBAC5BtN,EAAA5F,EAAA6F,cAAC4O,GAAD,CAAepP,IAAK,KAAOa,KAAK0C,MAAM8J,MACvBtP,SAAU8C,KAAK0C,MAAMxF,SACrByI,YAAa3F,KAAK0C,MAAM/J,MAAM6B,OAC9BwL,mBAAoBhG,KAAKgG,mBACzBN,qBAAsB1F,KAAK0F,qBAC3BxF,OAAQF,KAAK0C,MAAM8J,QAAUJ,GAAME,YAClD5M,EAAA5F,EAAA6F,cAAC6O,GAAD,CAAYrP,IAAK,KAAOa,KAAK0C,MAAM8J,MACvB1P,OAAQkD,KAAK0C,MAAM5F,OACnBnE,MAAOqH,KAAK0C,MAAM/J,MAClBgR,UAAW3J,KAAK0C,MAAMO,SACtBoF,mBAAoBrI,KAAKqI,mBACzB2B,gBAAiBhK,KAAK8M,gBACtBxE,aAActI,KAAK6M,aACnB3M,OAAQF,KAAK0C,MAAM8J,QAAUJ,GAAMtP,iBAhJvC2D,IAAMC,WCLlB+N,GAAcC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DAsCN,SAASC,GAAgBC,EAAOC,GAC9BC,UAAUC,cACPC,SAASJ,GACT5G,KAAK,SAAAiH,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiB7M,QACfwM,UAAUC,cAAcO,YAI1BtQ,QAAQC,IACN,iHAKE4P,GAAUA,EAAOU,UACnBV,EAAOU,SAASN,KAMlBjQ,QAAQC,IAAI,sCAGR4P,GAAUA,EAAOW,WACnBX,EAAOW,UAAUP,UAO5BQ,MAAM,SAAAC,GACL1Q,QAAQ0Q,MAAM,4CAA6CA,KC1FjEC,IAASC,OAAOtQ,EAAA5F,EAAA6F,cAACsQ,GAAD,MAASC,SAASC,eAAe,SDgB1C,SAAkBlB,GACvB,GAA6C,kBAAmBC,UAAW,CAGzE,GADkB,IAAIkB,IAAIC,eAAwB1B,OAAOC,SAASpF,MACpD8G,SAAW3B,OAAOC,SAAS0B,OAIvC,OAGF3B,OAAO4B,iBAAiB,OAAQ,WAC9B,IAAMvB,EAAK,GAAAjG,OAAMsH,eAAN,sBAEP5B,IAgEV,SAAiCO,EAAOC,GAEtCuB,MAAMxB,GACH5G,KAAK,SAAAqI,GAEJ,IAAMC,EAAcD,EAASvX,QAAQyX,IAAI,gBAEnB,MAApBF,EAASG,QACO,MAAfF,IAA8D,IAAvCA,EAAY9L,QAAQ,cAG5CsK,UAAUC,cAAc0B,MAAMzI,KAAK,SAAAiH,GACjCA,EAAayB,aAAa1I,KAAK,WAC7BuG,OAAOC,SAASmC,aAKpBhC,GAAgBC,EAAOC,KAG1BY,MAAM,WACLzQ,QAAQC,IACN,mEArFA2R,CAAwBhC,EAAOC,GAI/BC,UAAUC,cAAc0B,MAAMzI,KAAK,WACjChJ,QAAQC,IACN,gHAMJ0P,GAAgBC,EAAOC,MCvC/BE","file":"static/js/main.e729b3f6.chunk.js","sourcesContent":["const csv = require('csvtojson');\n\nasync function csv2promo(c) {\n  const rows = await csv({\n    output: \"json\",\n  }).fromString(c);\n\n  let promo = [];\n  let iName, iGender, iLeader, iBio, iChm, iPhy;\n  let headers = Object.keys(rows[0]);\n\n  for (const i of headers) {\n    const header = i.replace(/ /g, \"\").toUpperCase();\n    if (header.includes(\"NAME\") || header.includes(\"STUDENT\")) {\n      iName = iName || i;\n    } else if (header.includes(\"GENDER\") || header.includes(\"M/F\")) {\n      iGender = iGender || i;\n    } else if (header.includes(\"LEADER\")) {\n      iLeader = iLeader || i;\n    } else if (header.includes(\"BIO\")) {\n      iBio = iBio || i;\n    } else if (header.includes(\"CHM\")) {\n      iChm = iChm || i;\n    } else if (header.includes(\"PHY\")) {\n      iPhy = iPhy || i;\n    }\n  }\n\n  for (const info of rows) {\n\n    promo.push({\n      name: info[iName],\n      gender: info[iGender],\n      leader: info[iLeader],\n      bio: info[iBio],\n      chm: info[iChm],\n      phy: info[iPhy],\n    });\n  }\n\n  return promo;\n}\n\nexport default csv2promo;","import {sha256} from 'js-sha256';\n\nasync function hash(s) {\n  return sha256(s);\n}\n\nexport default hash;","import hash from './utils';\n\nfunction getStatsOf(ids, promo) {\n  let nbM = 0, nbF = 0;\n  let nbSL = 0, nbHL = 0;\n  let nbLeader = 0;\n\n  const subjCnts = {bio: 0, chm: 0, phy: 0};\n\n  for (const id of ids) {\n    const s = promo[id];\n    if (s.gender === \"M\") nbM++; else if (s.gender === \"F\") nbF++;\n\n    for (const subj of Object.keys(subjCnts)) {\n      if (s[subj]) {\n        subjCnts[subj]++;\n        if (s[subj] === \"SL\") nbSL++; else if (s[subj] === \"HL\") nbHL++;\n      }\n    }\n\n    if (s.leader) nbLeader++;\n  }\n\n  return {\n    nbM, nbF,\n    ...subjCnts,\n    nbSL, nbHL,\n    nbLeader\n  };\n}\n\n\nfunction evaluateGroupsUsingAvg(groups, promo) {\n  const promoStats = getStatsOf([...Array(promo.length).keys()], promo);\n  const nbGroups = groups.length;\n  let score = 0;\n  for (const g of groups) {\n    const groupStats = getStatsOf(g, promo);\n    score += Math.abs(groupStats.nbM - promoStats.nbM / nbGroups);\n    score += Math.abs(groupStats.nbF - promoStats.nbF / nbGroups);\n    score += Math.abs(groupStats.nbLeader - promoStats.nbLeader / nbGroups);\n    score += Math.abs(groupStats.bio - promoStats.bio / nbGroups);\n    score += Math.abs(groupStats.chm - promoStats.chm / nbGroups);\n    score += Math.abs(groupStats.phy - promoStats.phy / nbGroups);\n    score += Math.abs(groupStats.nbSL - promoStats.nbSL / nbGroups);\n    score += Math.abs(groupStats.nbHL - promoStats.nbHL / nbGroups);\n\n  }\n\n  return -score;\n}\n\nfunction evaluateGroupsUsingDiff(groups, promo) {\n  let score = 0;\n\n  for (let i = 0; i < groups.length; i++) {\n    for (let j = 0; j < i; j++) {\n      const s1 = getStatsOf(groups[i], promo);\n      const s2 = getStatsOf(groups[j], promo);\n\n      score += Math.abs(s1.nbM - s2.nbM);\n      score += Math.abs(s1.nbF - s2.nbF);\n      score += Math.abs(s1.nbLeader - s2.nbLeader);\n      score += Math.abs(s1.bio - s2.bio);\n      score += Math.abs(s1.chm - s2.chm);\n      score += Math.abs(s1.phy - s2.phy);\n      score += Math.abs(s1.nbSL - s2.nbSL);\n      score += Math.abs(s1.nbHL - s2.nbHL);\n    }\n  }\n\n  return -score;\n}\n\n// Fisher-Yates algorithm\n// copied from https://stackoverflow.com/a/6274381/6597726\nfunction shuffle(a) {\n  for (let i = a.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [a[i], a[j]] = [a[j], a[i]];\n  }\n}\n\n\nasync function makeGroups(promo, nbGroups) {\n  // Make groups\n  const nbStudents = promo.length;\n  const ids = [...Array(nbStudents).keys()];\n  shuffle(ids);\n  const groups = [];\n  for (let i = 0; i < nbGroups; i++) {\n    groups.push([]);\n  }\n  for (let j = 0; j < nbStudents; j++) {\n    groups[j % nbGroups].push(ids[j]);\n  }\n\n  // Test swaps\n  let score = evaluateGroupsUsingDiff(groups, promo);\n  let swap = {a: 0, b: 0, x: 0, y: 0};\n  let scores = [score];\n\n  while (true) {\n    for (let a = 0; a < nbGroups; a++) {\n      for (let b = 0; b < a; b++) {\n        for (let x = 0; x < groups[a].length; x++) {\n          for (let y = 0; y < groups[b].length; y++) {\n            [groups[a][x], groups[b][y]] = [groups[b][y], groups[a][x]];  // no bj hehehe\n            let score0 = evaluateGroupsUsingDiff(groups, promo);\n            if (score0 > score) {\n              score = score0;\n              swap = {a, b, x, y};\n            }\n            [groups[a][x], groups[b][y]] = [groups[b][y], groups[a][x]];\n          }\n        }\n      }\n    }\n\n    if (score > scores[scores.length - 1]) {\n      console.log(score);\n      scores.push(score);\n      const {a, b, x, y} = swap;\n      [groups[a][x], groups[b][y]] = [groups[b][y], groups[a][x]];\n    } else {\n      console.log(evaluateGroupsUsingAvg(groups, promo));\n      const key = await hash(JSON.stringify(promo));\n      return {\n        key,\n        groups,\n      };\n    }\n  }\n}\n\n\nexport default makeGroups;","import React from 'react';\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\nimport './homePage.css';\nimport {\n  Dialog,\n  Fab,\n} from \"@material-ui/core\";\n\n\nclass HomePage extends React.Component {\n  render() {\n    return (\n        <Dialog\n            fullScreen\n            className=\"homePage\"\n            open={this.props.isOpen}>\n          <div className=\"homePage_button_container\">\n            <Fab color=\"primary\"\n                 aria-label=\"Upload list of students\"\n                 onClick={this.props.onClick}\n                 variant=\"extended\">\n              <OpenInBrowserIcon/>\n              Upload list of students\n            </Fab>\n          </div>\n        </Dialog>\n    );\n  }\n}\n\nexport default HomePage;\n","import React from 'react';\nimport {\n  Dialog,\n  IconButton,\n  Slide,\n  Toolbar,\n  Typography\n} from '@material-ui/core';\nimport DoneIcon from '@material-ui/icons/Done';\nimport CloseIcon from '@material-ui/icons/Close';\nimport MaterialTable from 'material-table';\nimport './promoPage.css';\n\nfunction encodeData(data) {\n  return data.map(s => {\n    return {\n      ...s,\n      gender: s.gender === \"M\" ? 0 : s.gender === \"F\" ? 1 : 2,\n      leader: s.leader === undefined || !s.leader ? 0 : 1,\n      bio: s.bio === \"HL\" ? 2 : s.bio === \"SL\" ? 1 : 0,\n      chm: s.chm === \"HL\" ? 2 : s.chm === \"SL\" ? 1 : 0,\n      phy: s.phy === \"HL\" ? 2 : s.phy === \"SL\" ? 1 : 0,\n    }\n  });\n}\n\nconst genderLookup = {0: \"M\", 1: \"F\", 2: \"Other\"};\nconst leadershipLookup = {0: \"\", 1: \"Yes\"};\nconst sciLookup = {0: \" \", 1: \"SL\", 2: \"HL\"};\n\nfunction decodeData(data) {\n  return data.map(s => {\n    let s2 = {\n      ...s,\n      gender: genderLookup[s.gender],\n      leader: leadershipLookup[s.leader],\n      bio: sciLookup[s.bio],\n      chm: sciLookup[s.chm],\n      phy: sciLookup[s.phy],\n    };\n    delete s2.tableData;\n    return s2;\n  });\n}\n\nclass PromoPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.tableRef = React.createRef();\n  }\n\n  render() {\n    const Transition = React.forwardRef(function Transition(props, ref) {\n      return <Slide direction=\"up\" ref={ref} {...props} />;\n    });\n    return <Dialog fullScreen\n                   open={this.props.isOpen}\n                   onClose={this.props.handleClose}\n                   TransitionComponent={Transition}>\n      <Toolbar className={'tbl-app_bar'}>\n        <IconButton edge=\"start\" color=\"inherit\" onClick={this.props.handleClose} aria-label=\"Close\">\n          <CloseIcon/>\n        </IconButton>\n        <Typography variant=\"h5\" className=\"tbl-title\">\n          List of Students\n        </Typography>\n        <IconButton color=\"inherit\"\n                onClick={() => this.props.handleSave(decodeData(this.tableRef.current.state.data))}>\n          <DoneIcon/>\n        </IconButton>\n      </Toolbar>\n      <StudentsTable\n          ref={this.tableRef}\n          students={this.props.students}\n          fileName={this.props.fileName}/>\n    </Dialog>\n  }\n}\n\n\nclass StudentsTable extends React.Component {\n  TIMEOUT = 230;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      columns: [\n        {title: \"Name\", field: \"name\"},\n        {title: \"Gender\", field: \"gender\", lookup: genderLookup},\n        {title: \"Leadership\", field: \"leader\", lookup: leadershipLookup},\n        {title: \"BIO level\", field: \"bio\", lookup: sciLookup},\n        {title: \"CHM level\", field: \"chm\", lookup: sciLookup},\n        {title: \"PHY level\", field: \"phy\", lookup: sciLookup},\n      ],\n      data: encodeData(props.students),\n    };\n  }\n\n  render() {\n    return <MaterialTable\n        title={this.props.fileName}\n        columns={this.state.columns}\n        data={this.state.data}\n        options={{\n          addRowPosition: \"first\",\n          exportButton: true,\n          exportAllData: true,\n          filtering: true,\n          pageSize: 10,\n        }}\n        editable={{\n          onRowAdd: newData =>\n              new Promise((resolve, reject) => {\n                setTimeout(() => {\n                  {\n                    const data = this.state.data;\n                    data.push(newData);\n                    this.setState({data}, () => resolve());\n                  }\n                  resolve()\n                }, this.TIMEOUT)\n              }),\n          onRowUpdate: (newData, oldData) =>\n              new Promise((resolve, reject) => {\n                setTimeout(() => {\n                  {\n                    const data = this.state.data;\n                    const index = data.indexOf(oldData);\n                    data[index] = newData;\n                    this.setState({data}, () => resolve());\n                  }\n                  resolve()\n                }, this.TIMEOUT)\n              }),\n          onRowDelete: oldData =>\n              new Promise((resolve, reject) => {\n                setTimeout(() => {\n                  {\n                    let data = this.state.data;\n                    const index = data.indexOf(oldData);\n                    data.splice(index, 1);\n                    this.setState({data}, () => resolve());\n                  }\n                  resolve()\n                }, this.TIMEOUT)\n              }),\n        }}\n    />\n  }\n}\n\nexport default PromoPage;\n","import React from 'react';\nimport './newGroupsPage.css';\nimport {Dialog, Fab, Snackbar} from \"@material-ui/core\";\nimport GroupAddIcon from \"@material-ui/icons/GroupAdd\";\nimport OpenInBroswerIcon from \"@material-ui/icons/OpenInBrowser\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport RemoveIcon from \"@material-ui/icons/Remove\";\n\n\nclass NewGroupsPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      focus: '',\n      clicked: '',\n      nbGroups: props.nbGroups,\n    };\n\n    this.refUploaderText = React.createRef();\n    this.handleMouseLeave = this.handleMouseLeave.bind(this);\n    this.handleClickLeft = this.handleClickLeft.bind(this);\n    this.handleClickRight = this.handleClickRight.bind(this);\n  }\n\n  handleMouseEnter(focus) {\n    this.setState({\n      focus,\n      clicked: this.state.clicked === 'left' && this.refUploaderText.current.value === \"\" ? '' : this.state.clicked,\n    });\n  }\n\n  handleMouseLeave() {\n    this.setState({\n      focus: '',\n    });\n  }\n\n  getClassName(part) {\n    let className;\n    if (this.state.focus === '') {\n      className = \"\";\n    } else {\n      className = part === this.state.focus ? \"gp-focus\" : \"gp-blur\";\n    }\n    if (this.state.clicked === part) {\n      className = \"gp-focus active\";\n    }\n    return className;\n  }\n\n  handleClickLeft() {\n    if (this.state.clicked) return;\n    this.setState(\n        {clicked: 'left'},\n        () => this.refUploaderText.current.click()\n    );\n  }\n\n  handleClickRight() {\n    if (this.state.clicked) return;\n    this.setState(\n        {clicked: 'right'}\n    );\n    setTimeout(\n        () => this.props.handleGenerateGroups(this.state.nbGroups),\n        100,\n    );\n\n  }\n\n  canIncrementNb() {\n    return this.state.nbGroups + 1 <= this.props.maxNbGroups;\n  }\n\n  canDecrementNb() {\n    return this.state.nbGroups - 1 > 0;\n  }\n\n  incrementNb() {\n    this.setState({nbGroups: this.state.nbGroups + 1});\n  }\n\n  decrementNb() {\n    this.setState({nbGroups: this.state.nbGroups - 1});\n  }\n\n  render() {\n    return <Dialog fullScreen\n                   open={this.props.isOpen}>\n      <input type=\"file\"\n             id=\"file\"\n             ref={this.refUploaderText}\n             accept=\"text/plain\"\n             onChange={this.props.handleUploadGroups}\n             hidden/>\n      <div id=\"gp-container\">\n        <OptionPanel id_=\"gp-upload\"\n                     className_={\"gp-action \" + this.getClassName('left')}\n                     handleFocus={() => this.handleMouseEnter('left')}\n                     handleBlur={this.handleMouseLeave.bind(this)}>\n          <OpenInBroswerIcon className=\"svg_icon clickable\"\n                             onMouseEnter={() => this.handleMouseEnter('left')}\n                             onMouseLeave={this.handleMouseLeave}\n                             onClick={this.handleClickLeft}/>\n          <h1 className=\"gp-desc\">\n            Upload Groups\n          </h1>\n        </OptionPanel>\n        <OptionPanel id_=\"gp-generate\"\n                     className_={\"gp-action \" + this.getClassName('right')}>\n          <GroupAddIcon className=\"svg_icon clickable\"\n                        onMouseEnter={() => this.handleMouseEnter('right')}\n                        onMouseLeave={this.handleMouseLeave}\n                        onClick={this.handleClickRight}/>\n          <h1 className=\"gp-desc \">\n            Generate {this.state.nbGroups} Groups\n          </h1>\n          <div className={\"gp-toolbar\"}>\n            <Fab color=\"primary\"\n                 disabled={!this.canIncrementNb()}\n                 onClick={() => this.incrementNb()}>\n              <AddIcon/>\n            </Fab>\n            <Fab color=\"secondary\"\n                 disabled={!this.canDecrementNb()}\n                 onClick={() => this.decrementNb()}>\n              <RemoveIcon/>\n            </Fab>\n          </div>\n        </OptionPanel>\n      </div>\n      <Snackbar\n          anchorOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"right\",\n          }}\n          open={this.state.clicked === \"right\"}\n          message={\n            <span>\n                Processing ...\n              </span>\n          }\n      />\n    </Dialog>\n  }\n}\n\n\nclass OptionPanel extends React.Component {\n  render() {\n    return <div id={this.props.id_}\n                className={this.props.className_}>\n      <div className=\"gp-table\">\n        <div className=\"gp-child\">\n          {this.props.children}\n        </div>\n      </div>\n    </div>\n  }\n}\n\nexport default NewGroupsPage;\n","import React from 'react';\nimport {\n  AppBar,\n  Button,\n  Card,\n  Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle,\n  Divider,\n  Fab,\n  IconButton,\n  List,\n  ListItem,\n  ListItemText,\n  Snackbar,\n  Toolbar,\n  Typography\n} from \"@material-ui/core\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport SwapHorizIcon from \"@material-ui/icons/SwapHoriz\";\nimport UndoIcon from \"@material-ui/icons/Undo\";\nimport RedoIcon from \"@material-ui/icons/Redo\";\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport PeopleIcon from \"@material-ui/icons/People\";\nimport hash from './utils';\nimport \"./groupsPage.css\";\n\n\nfunction isPosEq(x, y) {\n  if (x === null || y === null) {\n    return x === y;\n  }\n  return x.i === y.i && x.j === y.j;\n}\n\nfunction hasSameProfile(s1, s2) {\n  return s1.gender === s2.gender\n      && s1.leader === s2.leader\n      && s1.bio === s2.bio\n      && s1.chm === s2.chm\n      && s1.phy === s2.phy;\n}\n\n\nclass GroupsPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lastSavedGroups: this.props.groups,\n      history: [this.props.groups],\n      i: 0,\n      selected1: null,\n      selected2: null,\n      highlighted: [],\n      isSaveWarningOpen: false,\n    };\n\n    this.refDownload = React.createRef();\n\n    hash(JSON.stringify(this.props.promo)).then(\n        (key) => {\n          this.setState({\n            key\n          });\n        }\n    );\n  }\n\n  groups() {\n    return this.state.history[this.state.i];\n  }\n\n  clearGroups() {\n    // No need to actually clear this.state.groups\n    this.props.handleGroupsChange({groups: [], key: ''});\n    this.props.handleShowOp();\n  }\n\n  saveGroups(shouldShowWarning = true) {\n    this.props.handleGroupsChange(this.groups());\n    this.setState({\n      lastSavedGroups: this.groups(),\n    });\n    if (shouldShowWarning) {\n      this.showSaveWarning();\n    }\n  }\n\n  showSaveWarning() {\n    this.setState({\n      isSaveWarningOpen: true,\n    });\n  }\n\n  hideSaveWarning() {\n    this.setState({\n      isSaveWarningOpen: false,\n    });\n  }\n\n  downloadGroups() {\n    this.saveGroups(false);\n    this.refDownload.current.click();\n  }\n\n  findIdsOfSameProfile(id) {\n    const s1 = this.props.promo[id];\n    const ids = [];\n    for (const [i, s2] of this.props.promo.entries()) {\n      if (i !== id) {\n        if (hasSameProfile(s1, s2)) {\n          ids.push(i);\n        }\n      }\n    }\n    return ids;\n  }\n\n  handleStudentClick(i, j) {\n    const x = {i, j};\n    const id = this.groups().groups[i][j];\n    let selected1, selected2;\n    if (this.state.selected1 === null) {\n      selected1 = x;\n      selected2 = null;\n    } else if (isPosEq(x, this.state.selected1)) {\n      selected1 = null;\n      selected2 = null;\n    } else {\n      if (this.state.highlighted.includes(id)) {\n        selected1 = this.state.selected1;\n        selected2 = x;\n      } else {\n        selected1 = x;\n        selected2 = null;\n      }\n    }\n    let highlighted;\n    if (selected1 !== null && selected2 === null) {\n      highlighted = this.findIdsOfSameProfile(this.groups().groups[selected1.i][selected1.j]);\n    } else {\n      highlighted = [];\n    }\n\n    this.setState({\n      selected1,\n      selected2,\n      highlighted,\n    })\n  }\n\n  canSwap() {\n    return this.state.selected1 !== null && this.state.selected2 !== null;\n  }\n\n  canUndo() {\n    return this.state.i - 1 >= 0;\n  }\n\n  canRedo() {\n    return this.state.i + 1 <= this.state.history.length - 1;\n  }\n\n  handleUndo() {\n    this.setState({\n      i: this.state.i - 1\n    });\n  }\n\n  handleRedo() {\n    this.setState({\n      i: this.state.i + 1\n    });\n  }\n\n  handleSwap() {\n    const groups = JSON.parse(JSON.stringify(this.groups().groups));\n    const a = this.state.selected1;\n    const b = this.state.selected2;\n    [groups[a.i][a.j], groups[b.i][b.j]] = [groups[b.i][b.j], groups[a.i][a.j]];  // hehe bj aaa\n    const i = this.state.i + 1;\n    const history = [...this.state.history.slice(0, i), {key: this.groups().key, groups}];\n    this.setState({\n      i,\n      history,\n      highlighted: [],\n    })\n  }\n\n  hasPromoChanged() {\n    return this.groups().key !== this.state.key;\n  }\n\n  renderGroups() {\n    if (this.hasPromoChanged()) return [];\n    return (\n        <div className=\"gps-container\">\n          {(this.groups().groups.map((gp, i) => (\n              <GroupBox\n                  key={JSON.stringify(gp)}\n                  groupNb={i}\n                  groupIds={gp}\n                  promo={this.props.promo}\n                  selected1={this.state.selected1}\n                  selected2={this.state.selected2}\n                  highlighted={this.state.highlighted}\n                  handleClick={this.handleStudentClick.bind(this)}\n              />\n          )))}\n        </div>\n    );\n  }\n\n  render() {\n    return <Dialog fullScreen\n                   open={this.props.isOpen}>\n      <a\n          hidden\n          ref={this.refDownload}\n          href={`data: text/plain; charset=utf-8,${encodeURIComponent(JSON.stringify(this.groups()))}`}\n          download={`${this.props.promoName}_groups.txt`}\n      >\n        {JSON.stringify(this.groups())}\n      </a>\n      <AppBar position=\"sticky\">\n        <Toolbar className=\"gps-toolbar\">\n          <IconButton color=\"inherit\"\n                      onClick={this.clearGroups.bind(this)}>\n            <CloseIcon/>\n          </IconButton>\n\n          <Typography variant=\"h5\" className=\"gps-title\">\n            Groups of\n            <Button color=\"inherit\" onClick={this.props.handleShowPromo}>\n              <Typography variant=\"h5\"\n                          className=\"gps-button-desc\">\n                Students\n              </Typography>\n              <PeopleIcon/>\n            </Button>\n          </Typography>\n\n          <IconButton color=\"inherit\"\n                      disabled={JSON.stringify(this.state.lastSavedGroups) === JSON.stringify(this.groups())}\n                      onClick={this.saveGroups.bind(this)}>\n            <SaveIcon/>\n          </IconButton>\n          <IconButton color=\"inherit\"\n                      disabled={!this.canUndo()}\n                      onClick={this.handleUndo.bind(this)}\n          >\n            <UndoIcon/>\n          </IconButton>\n          <IconButton color=\"inherit\"\n                      disabled={!this.canRedo()}\n                      onClick={this.handleRedo.bind(this)}\n          >\n            <RedoIcon/>\n          </IconButton>\n\n          <IconButton color=\"inherit\" onClick={this.downloadGroups.bind(this)}>\n            <GetAppIcon/>\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n\n      {this.renderGroups()}\n\n      <div className=\"gps-fab-container\">\n        <Fab\n            variant=\"extended\"\n            color=\"secondary\"\n            disabled={!this.canSwap()}\n            onClick={this.handleSwap.bind(this)}\n        >\n          <SwapHorizIcon/>\n          Swap!\n        </Fab>\n      </div>\n\n      <Snackbar\n          anchorOrigin={{\n            vertical: \"top\",\n            horizontal: \"right\",\n          }}\n          open={this.state.isSaveWarningOpen}\n          onClose={this.hideSaveWarning.bind(this)}\n          message={\n            <span>\n                Groups saved UNTIL this tab is closed.\n                Use <GetAppIcon/> to download the groups.\n              </span>\n          }\n          action={\n            <Button color=\"secondary\" onClick={this.hideSaveWarning.bind(this)}>\n              OK\n            </Button>}\n      />\n\n      <Dialog open={this.hasPromoChanged()}>\n        <DialogContent>\n          <DialogTitle>\n            The list of students has changed!\n          </DialogTitle>\n          <DialogContentText>\n            The loaded groups were generated using a different list.\n            This means that the groups may be unfairly distributed.\n            <br/>\n            You can either upload another saved file, or generate new groups.\n          </DialogContentText>\n          <DialogActions>\n            <Button onClick={this.props.handleShowPromo} color=\"default\">\n              View students\n            </Button>\n            <Button onClick={this.clearGroups.bind(this)} color=\"secondary\">\n              Go back\n            </Button>\n          </DialogActions>\n        </DialogContent>\n      </Dialog>\n\n    </Dialog>\n  }\n}\n\n\nclass GroupBox extends React.Component {\n  isSelected(j) {\n    const x = {i: this.props.groupNb, j};\n    return isPosEq(x, this.props.selected1) || isPosEq(x, this.props.selected2);\n  }\n\n  isHighlighted(id) {\n    return this.props.highlighted.includes(id);\n  }\n\n  getPersonBox(id, j) {\n    const name = this.props.promo[id].name;\n    return (\n        <ListItem\n            button\n            className={this.isHighlighted(id) ? \"gps-highlighted\" : \"\"}\n            selected={this.isSelected(j)}\n            key={id + \"/\" + j}\n            divider={j !== this.props.groupIds.length - 1}\n            onClick={() => this.props.handleClick(this.props.groupNb, j)}\n        >\n          <ListItemText primary={name}/>\n        </ListItem>\n    );\n  }\n\n  render() {\n    return (\n        <Card className=\"gps-box\">\n          <List>\n            <Typography variant=\"h5\" className=\"gps-box-title\">\n              Group {String.fromCharCode(65 + this.props.groupNb)}\n            </Typography>\n            <Divider variant=\"middle\"/>\n            {this.props.groupIds.map((id, j) => this.getPersonBox(id, j))}\n          </List>\n        </Card>\n    );\n  }\n}\n\nexport default GroupsPage;\n","import React from 'react';\nimport './loadCSV';\nimport './App.css';\nimport csv2promo from \"./loadCSV\";\nimport makeGroups from './students';\nimport HomePage from \"./homePage\";\nimport PromoPage from \"./promoPage\";\nimport NewGroupsPage from \"./newGroupsPage\";\nimport GroupsPage from \"./groupsPage\";\n\nconst STAGE = {\n  newPromo: 0,\n  promo: 1,\n  newGroups: 2,\n  groups: 3,\n};\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      nbGroups: 10,\n      groups: {key: \"\", groups: []},\n      fileName: \"IB Students\",\n      promo: [],\n      stage: STAGE.newPromo,\n    };\n\n    this.refUploaderCSV = React.createRef();\n    this.handleHomeOpen = this.handleHomeOpen.bind(this);\n    this.handleChooseCSV = this.handleChooseCSV.bind(this);\n    this.handleUploadCSV = this.handleUploadCSV.bind(this);\n    this.handleOpOpen = this.handleOpOpen.bind(this);\n    this.handlePromoOpen = this.handlePromoOpen.bind(this);\n    this.handlePromoClose = this.handlePromoClose.bind(this);\n    this.handlePromoSave = this.handlePromoSave.bind(this);\n    this.handleGenerateGroups = this.handleGenerateGroups.bind(this);\n    this.handleUploadGroups = this.handleUploadGroups.bind(this);\n    this.handleGroupsOpen = this.handleGroupsOpen.bind(this);\n    this.handleGroupsChange = this.handleGroupsChange.bind(this);\n  }\n\n  handleHomeOpen() {\n    this.refUploaderCSV.current.value = \"\";\n    this.setState({\n      stage: STAGE.newPromo\n    });\n  }\n\n  handleChooseCSV() {\n    this.refUploaderCSV.current.click();\n  }\n\n  handleUploadCSV(e) {\n    try {\n      let file = e.target.files[0];\n      let reader = new FileReader();\n      reader.onload = async (evt) => {\n        let content = evt.target.result;\n        let promo = await csv2promo(content);\n        this.setState({\n          promo,\n          nbGroups: Math.ceil(promo.length / 6),\n          fileName: file.name.split('.').slice(0, -1).join('.')\n        }, this.handlePromoOpen);\n      };\n      reader.readAsText(file);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  handlePromoOpen() {\n    this.setState({stage: STAGE.promo});\n  }\n\n  handleOpOpen() {\n    this.setState({stage: STAGE.newGroups});\n  }\n\n  handlePromoClose() {\n    if (this.state.groups.groups.length === 0) {\n      this.handleOpOpen();\n    } else {\n      this.handleGroupsOpen();\n    }\n  }\n\n  handlePromoSave(promo) {\n    this.setState({promo});\n    this.handlePromoClose();\n  }\n\n  async handleGenerateGroups(nbGroups) {\n    const groups = await makeGroups(this.state.promo, nbGroups);\n    this.setState({\n      groups,\n      nbGroups,\n    }, this.handleGroupsOpen);\n  }\n\n  handleUploadGroups(e) {\n    try {\n      let file = e.target.files[0];\n      let reader = new FileReader();\n      reader.onload = (evt) => {\n        const groups= JSON.parse(decodeURIComponent(evt.target.result));\n\n        this.setState({\n          groups,\n        }, this.handleGroupsOpen);\n      };\n\n      reader.readAsText(file);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  handleGroupsOpen() {\n    this.setState({stage: STAGE.groups});\n  }\n\n  handleGroupsChange(groups) {\n    this.setState({groups});\n  }\n\n  render() {\n    return (\n        <div className=\"App\">\n\n          <input type=\"file\"\n                 id=\"file\"\n                 ref={this.refUploaderCSV}\n                 accept=\"text/csv\"\n                 onChange={this.handleUploadCSV}\n                 hidden/>\n\n          <HomePage key={'home' + this.state.stage}\n                    isOpen={this.state.stage === STAGE.newPromo}\n                    onClick={this.handleChooseCSV}/>\n          <PromoPage key={'promo' + this.state.stage}\n                     students={this.state.promo}\n                     fileName={this.state.fileName}\n                     isOpen={this.state.stage === STAGE.promo}\n                     handleClose={this.handleHomeOpen}\n                     handleSave={this.handlePromoSave}/>\n          <NewGroupsPage key={'op' + this.state.stage}\n                         nbGroups={this.state.nbGroups}\n                         maxNbGroups={this.state.promo.length}\n                         handleUploadGroups={this.handleUploadGroups}\n                         handleGenerateGroups={this.handleGenerateGroups}\n                         isOpen={this.state.stage === STAGE.newGroups}/>\n          <GroupsPage key={'gp' + this.state.stage}\n                      groups={this.state.groups}\n                      promo={this.state.promo}\n                      promoName={this.state.fileName}\n                      handleGroupsChange={this.handleGroupsChange}\n                      handleShowPromo={this.handlePromoOpen}\n                      handleShowOp={this.handleOpOpen}\n                      isOpen={this.state.stage === STAGE.groups}/>\n        </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}