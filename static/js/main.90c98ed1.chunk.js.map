{"version":3,"sources":["loadCSV.js","utils.js","students.js","homePage.js","promoPage.js","newGroupsPage.js","groupsPage.js","App.js","serviceWorker.js","index.js"],"names":["csv","require","_callee","c","rows","promo","iName","iGender","iLeader","iBio","iChm","iPhy","headers","_i","_headers","i","header","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","info","regenerator_default","a","wrap","_context","prev","next","output","fromString","sent","Object","keys","length","replace","toUpperCase","includes","undefined","Symbol","iterator","done","value","push","name","gender","leader","bio","chm","phy","t0","return","finish","abrupt","stop","csv2promo","s","sha256","hash","getStatsOf","ids","nbM","nbF","nbSL","nbHL","nbLeader","subjCnts","_Object$keys","subj","err","objectSpread","evaluateGroupsUsingAvg","groups","promoStats","toConsumableArray","Array","nbGroups","score","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","groupStats","Math","abs","shuffle","j","floor","random","_ref","tStart","nbStudents","swap","scores","b","x","y","_ref2","score0","_ref3","_swap","_a","_b","_x3","_y","_ref4","tEnd","tElapsed","key","Date","now","console","log","JSON","stringify","makeGroups","HomePage","react_default","createElement","Dialog","fullScreen","className","open","this","props","isOpen","Fab","color","aria-label","onClick","variant","OpenInBrowser_default","React","Component","genderLookup","0","1","2","leadershipLookup","sciLookup","PromoPage","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","tableRef","createRef","_this2","Transition","forwardRef","ref","Slide","assign","direction","onClose","handleClose","TransitionComponent","Toolbar","IconButton","edge","Close_default","Typography","handleSave","current","state","data","map","s2","tableData","Done_default","promoPage_StudentsTable","students","fileName","StudentsTable","_this3","TIMEOUT","columns","title","field","lookup","_this4","dist_default","options","addRowPosition","exportButton","exportAllData","filtering","pageSize","editable","onRowAdd","newData","Promise","resolve","reject","setTimeout","setState","onRowUpdate","oldData","index","indexOf","onRowDelete","splice","NewGroupsPage","focus","clicked","refUploaderText","handleMouseLeave","bind","assertThisInitialized","handleClickLeft","handleClickRight","part","click","handleGenerateGroups","maxNbGroups","type","id","accept","onChange","e","handleUploadGroups","hidden","newGroupsPage_OptionPanel","id_","className_","getClassName","handleFocus","handleMouseEnter","handleBlur","onMouseEnter","onMouseLeave","GroupAdd_default","disabled","canIncrementNb","incrementNb","Add_default","canDecrementNb","decrementNb","Remove_default","Snackbar","anchorOrigin","vertical","horizontal","message","OptionPanel","children","isPosEq","hasSameProfile","s1","diffGroups","gps1","gps2","GroupsPage","lastSavedGroups","history","selected1","selected2","swapped","highlighted","isSaveWarningOpen","refDownload","then","handleGroupsChange","handleShowOp","shouldShowWarning","arguments","showSaveWarning","saveGroups","entries","slicedToArray","findIdsOfSameProfile","parse","concat","slice","hasPromoChanged","gp","groupsPage_GroupBox","groupNb","groupIds","handleClick","handleStudentClick","href","encodeURIComponent","download","promoName","AppBar","position","clearGroups","Button","handleShowPromo","People_default","Save_default","canUndo","handleUndo","Undo_default","canRedo","handleRedo","Redo_default","downloadGroups","GetApp_default","renderGroups","canSwap","handleSwap","SwapHoriz_default","hideSaveWarning","action","DialogContent","DialogTitle","DialogContentText","DialogActions","GroupBox","ListItem","button","isHighlighted","selected","isSelected","divider","ListItemText","primary","isSwapped","Card","List","String","fromCharCode","Divider","getPersonBox","STAGE","newPromo","newGroups","App","stage","refUploaderCSV","handleHomeOpen","handleChooseCSV","handleUploadCSV","handleOpOpen","handlePromoOpen","handlePromoClose","handlePromoSave","handleGroupsOpen","file","target","files","reader","FileReader","onload","asyncToGenerator","mark","evt","content","result","ceil","split","join","_x","apply","readAsText","handleFail","decodeURIComponent","src_homePage","src_promoPage","src_newGroupsPage","src_groupsPage","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","render","src_App_0","document","getElementById","URL","process","origin","addEventListener","fetch","response","contentType","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.90c98ed1.chunk.js","sourcesContent":["const csv = require('csvtojson');\n\nasync function csv2promo(c) {\n  const rows = await csv({\n    output: \"json\",\n  }).fromString(c);\n\n  let promo = [];\n  let iName, iGender, iLeader, iBio, iChm, iPhy;\n  let headers = Object.keys(rows[0]);\n\n  for (const i of headers) {\n    const header = i.replace(/ /g, \"\").toUpperCase();\n    if (header.includes(\"NAME\") || header.includes(\"STUDENT\")) {\n      iName = iName || i;\n    } else if (header.includes(\"GENDER\") || header.includes(\"M/F\")) {\n      iGender = iGender || i;\n    } else if (header.includes(\"LEADER\")) {\n      iLeader = iLeader || i;\n    } else if (header.includes(\"BIO\")) {\n      iBio = iBio || i;\n    } else if (header.includes(\"CHM\")) {\n      iChm = iChm || i;\n    } else if (header.includes(\"PHY\")) {\n      iPhy = iPhy || i;\n    }\n  }\n\n  for (const info of rows) {\n\n    promo.push({\n      name: info[iName],\n      gender: info[iGender],\n      leader: info[iLeader],\n      bio: info[iBio],\n      chm: info[iChm],\n      phy: info[iPhy],\n    });\n  }\n\n  return promo;\n}\n\nexport default csv2promo;","import {sha256} from 'js-sha256';\n\nasync function hash(s) {\n  return sha256(s);\n}\n\nexport default hash;","import hash from './utils';\n\nfunction getStatsOf(ids, promo) {\n  let nbM = 0, nbF = 0;\n  let nbSL = 0, nbHL = 0;\n  let nbLeader = 0;\n\n  const subjCnts = {bio: 0, chm: 0, phy: 0};\n\n  for (const id of ids) {\n    const s = promo[id];\n    if (s.gender === \"M\") nbM++; else if (s.gender === \"F\") nbF++;\n\n    for (const subj of Object.keys(subjCnts)) {\n      if (s[subj]) {\n        subjCnts[subj]++;\n        if (s[subj] === \"SL\") nbSL++; else if (s[subj] === \"HL\") nbHL++;\n      }\n    }\n\n    if (s.leader) nbLeader++;\n  }\n\n  return {\n    nbM, nbF,\n    ...subjCnts,\n    nbSL, nbHL,\n    nbLeader\n  };\n}\n\n\nfunction evaluateGroupsUsingAvg(groups, promo) {\n  const promoStats = getStatsOf([...Array(promo.length).keys()], promo);\n  const nbGroups = groups.length;\n  let score = 0;\n  for (const g of groups) {\n    const groupStats = getStatsOf(g, promo);\n    score += Math.abs(groupStats.nbM - promoStats.nbM / nbGroups);\n    score += Math.abs(groupStats.nbF - promoStats.nbF / nbGroups);\n    score += Math.abs(groupStats.nbLeader - promoStats.nbLeader / nbGroups);\n    score += Math.abs(groupStats.bio - promoStats.bio / nbGroups);\n    score += Math.abs(groupStats.chm - promoStats.chm / nbGroups);\n    score += Math.abs(groupStats.phy - promoStats.phy / nbGroups);\n    score += Math.abs(groupStats.nbSL - promoStats.nbSL / nbGroups);\n    score += Math.abs(groupStats.nbHL - promoStats.nbHL / nbGroups);\n\n  }\n\n  return -score;\n}\n\n/*function evaluateGroupsUsingDiff(groups, promo) {\n  let score = 0;\n\n  for (let i = 0; i < groups.length; i++) {\n    for (let j = 0; j < i; j++) {\n      const s1 = getStatsOf(groups[i], promo);\n      const s2 = getStatsOf(groups[j], promo);\n\n      score += Math.abs(s1.nbM - s2.nbM);\n      score += Math.abs(s1.nbF - s2.nbF);\n      score += Math.abs(s1.nbLeader - s2.nbLeader);\n      score += Math.abs(s1.bio - s2.bio);\n      score += Math.abs(s1.chm - s2.chm);\n      score += Math.abs(s1.phy - s2.phy);\n      score += Math.abs(s1.nbSL - s2.nbSL);\n      score += Math.abs(s1.nbHL - s2.nbHL);\n    }\n  }\n\n  return -score;\n}*/\n\n// Fisher-Yates algorithm\n// copied from https://stackoverflow.com/a/6274381/6597726\nfunction shuffle(a) {\n  for (let i = a.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [a[i], a[j]] = [a[j], a[i]];\n  }\n}\n\n\nasync function makeGroups(promo, nbGroups) {\n  const tStart = Date.now();\n\n  // Make groups\n  const nbStudents = promo.length;\n  const ids = [...Array(nbStudents).keys()];\n  shuffle(ids);\n  const groups = [];\n  for (let i = 0; i < nbGroups; i++) {\n    groups.push([]);\n  }\n  for (let j = 0; j < nbStudents; j++) {\n    groups[j % nbGroups].push(ids[j]);\n  }\n\n  // Test swaps\n  let score = evaluateGroupsUsingAvg(groups, promo);\n  let swap = {a: 0, b: 0, x: 0, y: 0};\n  let scores = [score];\n\n  while (true) {\n    for (let a = 0; a < nbGroups; a++) {\n      for (let b = 0; b < a; b++) {\n        for (let x = 0; x < groups[a].length; x++) {\n          for (let y = 0; y < groups[b].length; y++) {\n            [groups[a][x], groups[b][y]] = [groups[b][y], groups[a][x]];  // no bj hehehe\n            let score0 = evaluateGroupsUsingAvg(groups, promo);\n            if (score0 > score) {\n              score = score0;\n              swap = {a, b, x, y};\n            }\n            [groups[a][x], groups[b][y]] = [groups[b][y], groups[a][x]];\n          }\n        }\n      }\n    }\n\n    if (score > scores[scores.length - 1]) {\n      scores.push(score);\n      const {a, b, x, y} = swap;\n      [groups[a][x], groups[b][y]] = [groups[b][y], groups[a][x]];\n    } else {\n      const tEnd = Date.now();\n      const tElapsed = (tEnd - tStart) / 1000;\n\n      console.log(\"Time elapsed: \", tElapsed);\n      console.log(\"Aggregate offset: \", -evaluateGroupsUsingAvg(groups, promo));\n      console.log(scores);\n      const key = await hash(JSON.stringify(promo));\n      return {\n        key,\n        groups,\n      };\n    }\n  }\n}\n\n\nexport default makeGroups;","import React from 'react';\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\nimport './homePage.css';\nimport {\n  Dialog,\n  Fab,\n} from \"@material-ui/core\";\n\n\nclass HomePage extends React.Component {\n  render() {\n    return (\n        <Dialog\n            fullScreen\n            className=\"homePage\"\n            open={this.props.isOpen}>\n          <div className=\"homePage_button_container\">\n            <Fab color=\"primary\"\n                 aria-label=\"Upload list of students\"\n                 onClick={this.props.onClick}\n                 variant=\"extended\">\n              <OpenInBrowserIcon/>\n              Upload list of students\n            </Fab>\n          </div>\n        </Dialog>\n    );\n  }\n}\n\nexport default HomePage;\n","import React from 'react';\nimport {\n  Dialog,\n  IconButton,\n  Slide,\n  Toolbar,\n  Typography\n} from '@material-ui/core';\nimport DoneIcon from '@material-ui/icons/Done';\nimport CloseIcon from '@material-ui/icons/Close';\nimport MaterialTable from 'material-table';\nimport './promoPage.css';\n\nfunction encodeData(data) {\n  return data.map(s => {\n    return {\n      ...s,\n      gender: s.gender === \"M\" ? 0 : s.gender === \"F\" ? 1 : 2,\n      leader: s.leader === undefined || !s.leader ? 0 : 1,\n      bio: s.bio === \"HL\" ? 2 : s.bio === \"SL\" ? 1 : 0,\n      chm: s.chm === \"HL\" ? 2 : s.chm === \"SL\" ? 1 : 0,\n      phy: s.phy === \"HL\" ? 2 : s.phy === \"SL\" ? 1 : 0,\n    }\n  });\n}\n\nconst genderLookup = {0: \"M\", 1: \"F\", 2: \"Other\"};\nconst leadershipLookup = {0: \"\", 1: \"Yes\"};\nconst sciLookup = {0: \"\", 1: \"SL\", 2: \"HL\"};\n\nfunction decodeData(data) {\n  return data.map(s => {\n    let s2 = {\n      ...s,\n      gender: genderLookup[s.gender],\n      leader: leadershipLookup[s.leader],\n      bio: sciLookup[s.bio],\n      chm: sciLookup[s.chm],\n      phy: sciLookup[s.phy],\n    };\n    delete s2.tableData;\n    return s2;\n  });\n}\n\nclass PromoPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.tableRef = React.createRef();\n  }\n\n  render() {\n    const Transition = React.forwardRef(function Transition(props, ref) {\n      return <Slide direction=\"up\" ref={ref} {...props} />;\n    });\n    return <Dialog fullScreen\n                   open={this.props.isOpen}\n                   onClose={this.props.handleClose}\n                   TransitionComponent={Transition}>\n      <Toolbar className={'tbl-app_bar'}>\n        <IconButton edge=\"start\" color=\"inherit\" onClick={this.props.handleClose} aria-label=\"Close\">\n          <CloseIcon/>\n        </IconButton>\n        <Typography variant=\"h5\" className=\"tbl-title\">\n          List of Students\n        </Typography>\n        <IconButton color=\"inherit\"\n                onClick={() => this.props.handleSave(decodeData(this.tableRef.current.state.data))}>\n          <DoneIcon/>\n        </IconButton>\n      </Toolbar>\n      <StudentsTable\n          ref={this.tableRef}\n          students={this.props.students}\n          fileName={this.props.fileName}/>\n    </Dialog>\n  }\n}\n\n\nclass StudentsTable extends React.Component {\n  TIMEOUT = 230;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      columns: [\n        {title: \"Name\", field: \"name\"},\n        {title: \"Gender\", field: \"gender\", lookup: genderLookup},\n        {title: \"Leadership\", field: \"leader\", lookup: leadershipLookup},\n        {title: \"BIO level\", field: \"bio\", lookup: sciLookup},\n        {title: \"CHM level\", field: \"chm\", lookup: sciLookup},\n        {title: \"PHY level\", field: \"phy\", lookup: sciLookup},\n      ],\n      data: encodeData(props.students),\n    };\n  }\n\n  render() {\n    return <MaterialTable\n        title={this.props.fileName}\n        columns={this.state.columns}\n        data={this.state.data}\n        options={{\n          addRowPosition: \"first\",\n          exportButton: true,\n          exportAllData: true,\n          filtering: true,\n          pageSize: 10,\n        }}\n        editable={{\n          onRowAdd: newData =>\n              new Promise((resolve, reject) => {\n                setTimeout(() => {\n                  {\n                    const data = this.state.data;\n                    data.push(newData);\n                    this.setState({data}, () => resolve());\n                  }\n                  resolve()\n                }, this.TIMEOUT)\n              }),\n          onRowUpdate: (newData, oldData) =>\n              new Promise((resolve, reject) => {\n                setTimeout(() => {\n                  {\n                    const data = this.state.data;\n                    const index = data.indexOf(oldData);\n                    data[index] = newData;\n                    this.setState({data}, () => resolve());\n                  }\n                  resolve()\n                }, this.TIMEOUT)\n              }),\n          onRowDelete: oldData =>\n              new Promise((resolve, reject) => {\n                setTimeout(() => {\n                  {\n                    let data = this.state.data;\n                    const index = data.indexOf(oldData);\n                    data.splice(index, 1);\n                    this.setState({data}, () => resolve());\n                  }\n                  resolve()\n                }, this.TIMEOUT)\n              }),\n        }}\n    />\n  }\n}\n\nexport default PromoPage;\n","import React from 'react';\nimport './newGroupsPage.css';\nimport {Dialog, Fab, Snackbar} from \"@material-ui/core\";\nimport GroupAddIcon from \"@material-ui/icons/GroupAdd\";\nimport OpenInBroswerIcon from \"@material-ui/icons/OpenInBrowser\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport RemoveIcon from \"@material-ui/icons/Remove\";\n\n\nclass NewGroupsPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      focus: '',\n      clicked: '',\n      nbGroups: props.nbGroups,\n    };\n\n    this.refUploaderText = React.createRef();\n    this.handleMouseLeave = this.handleMouseLeave.bind(this);\n    this.handleClickLeft = this.handleClickLeft.bind(this);\n    this.handleClickRight = this.handleClickRight.bind(this);\n  }\n\n  handleMouseEnter(focus) {\n    this.setState({\n      focus,\n      clicked: this.state.clicked === 'left' && this.refUploaderText.current.value === \"\" ? '' : this.state.clicked,\n    });\n  }\n\n  handleMouseLeave() {\n    this.setState({\n      focus: '',\n    });\n  }\n\n  getClassName(part) {\n    let className;\n    if (this.state.focus === '') {\n      className = \"\";\n    } else {\n      className = part === this.state.focus ? \"gp-focus\" : \"gp-blur\";\n    }\n    if (this.state.clicked === part) {\n      className = \"gp-focus active\";\n    }\n    return className;\n  }\n\n  handleClickLeft() {\n    if (this.state.clicked) return;\n    this.setState(\n        {clicked: 'left'},\n        () => this.refUploaderText.current.click()\n    );\n  }\n\n  handleClickRight() {\n    if (this.state.clicked) return;\n    this.setState(\n        {clicked: 'right'}\n    );\n    setTimeout(\n        () => this.props.handleGenerateGroups(this.state.nbGroups),\n        100,\n    );\n\n  }\n\n  canIncrementNb() {\n    return this.state.nbGroups + 1 <= this.props.maxNbGroups;\n  }\n\n  canDecrementNb() {\n    return this.state.nbGroups - 1 > 0;\n  }\n\n  incrementNb() {\n    this.setState({nbGroups: this.state.nbGroups + 1});\n  }\n\n  decrementNb() {\n    this.setState({nbGroups: this.state.nbGroups - 1});\n  }\n\n  render() {\n    return <Dialog fullScreen\n                   open={this.props.isOpen}>\n      <input type=\"file\"\n             id=\"file\"\n             ref={this.refUploaderText}\n             accept=\"text/plain\"\n             onChange={(e) => this.props.handleUploadGroups(e, () => this.setState({clicked: ''}))}\n             hidden/>\n      <div id=\"gp-container\">\n        <OptionPanel id_=\"gp-upload\"\n                     className_={\"gp-action \" + this.getClassName('left')}\n                     handleFocus={() => this.handleMouseEnter('left')}\n                     handleBlur={this.handleMouseLeave.bind(this)}>\n          <OpenInBroswerIcon className=\"svg_icon clickable\"\n                             onMouseEnter={() => this.handleMouseEnter('left')}\n                             onMouseLeave={this.handleMouseLeave}\n                             onClick={this.handleClickLeft}/>\n          <h1 className=\"gp-desc\">\n            Upload Groups\n          </h1>\n        </OptionPanel>\n        <OptionPanel id_=\"gp-generate\"\n                     className_={\"gp-action \" + this.getClassName('right')}>\n          <GroupAddIcon className=\"svg_icon clickable\"\n                        onMouseEnter={() => this.handleMouseEnter('right')}\n                        onMouseLeave={this.handleMouseLeave}\n                        onClick={this.handleClickRight}/>\n          <h1 className=\"gp-desc \">\n            Generate {this.state.nbGroups} Groups\n          </h1>\n          <div className={\"gp-toolbar\"}>\n            <Fab color=\"primary\"\n                 disabled={!this.canIncrementNb()}\n                 onClick={() => this.incrementNb()}>\n              <AddIcon/>\n            </Fab>\n            <Fab color=\"secondary\"\n                 disabled={!this.canDecrementNb()}\n                 onClick={() => this.decrementNb()}>\n              <RemoveIcon/>\n            </Fab>\n          </div>\n        </OptionPanel>\n      </div>\n      <Snackbar\n          anchorOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"right\",\n          }}\n          open={this.state.clicked === \"right\"}\n          message={\n            <span>\n                Processing ...\n              </span>\n          }\n      />\n    </Dialog>\n  }\n}\n\n\nclass OptionPanel extends React.Component {\n  render() {\n    return <div id={this.props.id_}\n                className={this.props.className_}>\n      <div className=\"gp-table\">\n        <div className=\"gp-child\">\n          {this.props.children}\n        </div>\n      </div>\n    </div>\n  }\n}\n\nexport default NewGroupsPage;\n","import React from 'react';\nimport {\n  AppBar,\n  Button,\n  Card,\n  Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle,\n  Divider,\n  Fab,\n  IconButton,\n  List,\n  ListItem,\n  ListItemText,\n  Snackbar,\n  Toolbar,\n  Typography\n} from \"@material-ui/core\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport SwapHorizIcon from \"@material-ui/icons/SwapHoriz\";\nimport UndoIcon from \"@material-ui/icons/Undo\";\nimport RedoIcon from \"@material-ui/icons/Redo\";\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport PeopleIcon from \"@material-ui/icons/People\";\nimport hash from './utils';\nimport \"./groupsPage.css\";\n\n\nfunction isPosEq(x, y) {\n  if (x === null || y === null) {\n    return x === y;\n  }\n  return x.i === y.i && x.j === y.j;\n}\n\nfunction hasSameProfile(s1, s2) {\n  return s1.gender === s2.gender\n      && s1.leader === s2.leader\n      && s1.bio === s2.bio\n      && s1.chm === s2.chm\n      && s1.phy === s2.phy;\n}\n\nfunction diffGroups(gps1, gps2) {\n  for (let i = 0; i < gps1.length; i++) {\n    for (let j = 0; j < gps1[i].length; j++) {\n      if (gps1[i][j] !== gps2[i][j]) {\n        return [gps1[i][j], gps2[i][j]];\n      }\n    }\n  }\n  return [];\n}\n\n\nclass GroupsPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lastSavedGroups: this.props.groups,\n      history: [this.props.groups],\n      i: 0,\n      selected1: null,\n      selected2: null,\n      swapped: [],\n      highlighted: [],\n      isSaveWarningOpen: false,\n    };\n\n    this.refDownload = React.createRef();\n\n    hash(JSON.stringify(this.props.promo)).then(\n        (key) => {\n          this.setState({\n            key\n          });\n        }\n    );\n  }\n\n  groups() {\n    return this.state.history[this.state.i];\n  }\n\n  clearGroups() {\n    // No need to actually clear this.state.groups\n    this.props.handleGroupsChange({groups: [], key: ''});\n    this.props.handleShowOp();\n  }\n\n  saveGroups(shouldShowWarning = true) {\n    this.props.handleGroupsChange(this.groups());\n    this.setState({\n      lastSavedGroups: this.groups(),\n    });\n    if (shouldShowWarning) {\n      this.showSaveWarning();\n    }\n  }\n\n  showSaveWarning() {\n    this.setState({\n      isSaveWarningOpen: true,\n    });\n  }\n\n  hideSaveWarning() {\n    this.setState({\n      isSaveWarningOpen: false,\n    });\n  }\n\n  downloadGroups() {\n    this.saveGroups(false);\n    this.refDownload.current.click();\n  }\n\n  findIdsOfSameProfile(id) {\n    const s1 = this.props.promo[id];\n    const ids = [];\n    for (const [i, s2] of this.props.promo.entries()) {\n      if (i !== id) {\n        if (hasSameProfile(s1, s2)) {\n          ids.push(i);\n        }\n      }\n    }\n    return ids;\n  }\n\n  handleStudentClick(i, j) {\n    const x = {i, j};\n    const id = this.groups().groups[i][j];\n    let selected1, selected2;\n    if (this.state.selected1 === null) {\n      selected1 = x;\n      selected2 = null;\n    } else if (isPosEq(x, this.state.selected1)) {\n      selected1 = null;\n      selected2 = null;\n    } else {\n      if (this.state.highlighted.includes(id)) {\n        selected1 = this.state.selected1;\n        selected2 = x;\n      } else {\n        selected1 = x;\n        selected2 = null;\n      }\n    }\n    let highlighted;\n    if (selected1 !== null && selected2 === null) {\n      highlighted = this.findIdsOfSameProfile(this.groups().groups[selected1.i][selected1.j]);\n    } else {\n      highlighted = [];\n    }\n\n    this.setState({\n      selected1,\n      selected2,\n      highlighted,\n    })\n  }\n\n  canSwap() {\n    return this.state.selected1 !== null && this.state.selected2 !== null;\n  }\n\n  canUndo() {\n    return this.state.i - 1 >= 0;\n  }\n\n  canRedo() {\n    return this.state.i + 1 <= this.state.history.length - 1;\n  }\n\n  handleUndo() {\n    this.setState({\n      i: this.state.i - 1,\n      selected1: null,\n      selected2: null,\n      highlighted: [],\n      swapped: diffGroups(this.state.history[this.state.i].groups, this.state.history[this.state.i - 1].groups),\n    });\n  }\n\n  handleRedo() {\n    this.setState({\n      i: this.state.i + 1,\n      selected1: null,\n      selected2: null,\n      highlighted: [],\n      swapped: diffGroups(this.state.history[this.state.i].groups, this.state.history[this.state.i + 1].groups),\n    });\n  }\n\n  handleSwap() {\n    const groups = JSON.parse(JSON.stringify(this.groups().groups));\n    const a = this.state.selected1;\n    const b = this.state.selected2;\n    [groups[a.i][a.j], groups[b.i][b.j]] = [groups[b.i][b.j], groups[a.i][a.j]];  // hehe bj aaa\n    const i = this.state.i + 1;\n    const history = [...this.state.history.slice(0, i), {key: this.groups().key, groups}];\n    this.setState({\n      i,\n      history,\n      selected1: null,\n      selected2: null,\n      highlighted: [],\n      swapped: [groups[a.i][a.j], groups[b.i][b.j]],\n    })\n  }\n\n  hasPromoChanged() {\n    return this.groups().key !== this.state.key;\n  }\n\n  renderGroups() {\n    if (this.hasPromoChanged()) return [];\n    return (\n        <div className=\"gps-container\">\n          {(this.groups().groups.map((gp, i) => (\n              <GroupBox\n                  key={JSON.stringify(gp)}\n                  groupNb={i}\n                  groupIds={gp}\n                  promo={this.props.promo}\n                  swapped={this.state.swapped}\n                  selected1={this.state.selected1}\n                  selected2={this.state.selected2}\n                  highlighted={this.state.highlighted}\n                  handleClick={this.handleStudentClick.bind(this)}\n              />\n          )))}\n        </div>\n    );\n  }\n\n  render() {\n    return <Dialog fullScreen\n                   open={this.props.isOpen}>\n      <a\n          hidden\n          ref={this.refDownload}\n          href={`data: text/plain; charset=utf-8,${encodeURIComponent(JSON.stringify(this.groups()))}`}\n          download={`${this.props.promoName}_groups.txt`}\n      >\n        {JSON.stringify(this.groups())}\n      </a>\n      <AppBar position=\"sticky\">\n        <Toolbar className=\"gps-toolbar\">\n          <IconButton color=\"inherit\"\n                      onClick={this.clearGroups.bind(this)}>\n            <CloseIcon/>\n          </IconButton>\n\n          <Typography variant=\"h5\" className=\"gps-title\">\n            Groups of\n            <Button color=\"inherit\" onClick={this.props.handleShowPromo}>\n              <Typography variant=\"h5\"\n                          className=\"gps-button-desc\">\n                Students\n              </Typography>\n              <PeopleIcon/>\n            </Button>\n          </Typography>\n\n          <IconButton color=\"inherit\"\n                      disabled={JSON.stringify(this.state.lastSavedGroups) === JSON.stringify(this.groups())}\n                      onClick={this.saveGroups.bind(this)}>\n            <SaveIcon/>\n          </IconButton>\n          <IconButton color=\"inherit\"\n                      disabled={!this.canUndo()}\n                      onClick={this.handleUndo.bind(this)}\n          >\n            <UndoIcon/>\n          </IconButton>\n          <IconButton color=\"inherit\"\n                      disabled={!this.canRedo()}\n                      onClick={this.handleRedo.bind(this)}\n          >\n            <RedoIcon/>\n          </IconButton>\n\n          <IconButton color=\"inherit\" onClick={this.downloadGroups.bind(this)}>\n            <GetAppIcon/>\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n\n      {this.renderGroups()}\n\n      <div className=\"gps-fab-container\">\n        <Fab\n            variant=\"extended\"\n            color=\"secondary\"\n            disabled={!this.canSwap()}\n            onClick={this.handleSwap.bind(this)}\n        >\n          <SwapHorizIcon/>\n          Swap!\n        </Fab>\n      </div>\n\n      <Snackbar\n          anchorOrigin={{\n            vertical: \"top\",\n            horizontal: \"right\",\n          }}\n          open={this.state.isSaveWarningOpen}\n          onClose={this.hideSaveWarning.bind(this)}\n          message={\n            <span>\n                Groups saved UNTIL this tab is closed.\n                Use <GetAppIcon/> to download the groups.\n              </span>\n          }\n          action={\n            <Button color=\"secondary\" onClick={this.hideSaveWarning.bind(this)}>\n              OK\n            </Button>}\n      />\n\n      <Dialog open={this.hasPromoChanged()}>\n        <DialogContent>\n          <DialogTitle>\n            The list of students has changed!\n          </DialogTitle>\n          <DialogContentText>\n            The loaded groups were generated using a different list.\n            This means that the groups may be unfairly distributed.\n            <br/>\n            You can either upload another saved file, or generate new groups.\n          </DialogContentText>\n          <DialogActions>\n            <Button onClick={this.props.handleShowPromo} color=\"default\">\n              View students\n            </Button>\n            <Button onClick={this.clearGroups.bind(this)} color=\"secondary\">\n              Ok\n            </Button>\n          </DialogActions>\n        </DialogContent>\n      </Dialog>\n\n    </Dialog>\n  }\n}\n\n\nclass GroupBox extends React.Component {\n  isSelected(j) {\n    const x = {i: this.props.groupNb, j};\n    return isPosEq(x, this.props.selected1) || isPosEq(x, this.props.selected2);\n  }\n\n  isHighlighted(id) {\n    return this.props.highlighted.includes(id);\n  }\n\n  isSwapped(id) {\n    return this.props.swapped.includes(id);\n  }\n\n  getPersonBox(id, j) {\n    const name = this.props.promo[id].name;\n    return (\n        <ListItem\n            button\n            className={this.isHighlighted(id) ? \"gps-highlighted\" : \"\"}\n            selected={this.isSelected(j)}\n            key={id + \"/\" + j}\n            divider={j !== this.props.groupIds.length - 1}\n            onClick={() => this.props.handleClick(this.props.groupNb, j)}\n        >\n          <ListItemText primary={name} className={this.isSwapped(id) ? \"gps-swapped\" : \"\"}/>\n        </ListItem>\n    );\n  }\n\n  render() {\n    return (\n        <Card className=\"gps-box\">\n          <List>\n            <Typography variant=\"h5\" className=\"gps-box-title\">\n              Group {String.fromCharCode(65 + this.props.groupNb)}\n            </Typography>\n            <Divider variant=\"middle\"/>\n            {this.props.groupIds.map((id, j) => this.getPersonBox(id, j))}\n          </List>\n        </Card>\n    );\n  }\n}\n\nexport default GroupsPage;\n","import React from 'react';\nimport './loadCSV';\nimport './App.css';\nimport csv2promo from \"./loadCSV\";\nimport makeGroups from './students';\nimport HomePage from \"./homePage\";\nimport PromoPage from \"./promoPage\";\nimport NewGroupsPage from \"./newGroupsPage\";\nimport GroupsPage from \"./groupsPage\";\n\nconst STAGE = {\n  newPromo: 0,\n  promo: 1,\n  newGroups: 2,\n  groups: 3,\n};\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      nbGroups: 10,\n      groups: {key: \"\", groups: []},\n      fileName: \"IB Students\",\n      promo: [],\n      stage: STAGE.newPromo,\n    };\n\n    this.refUploaderCSV = React.createRef();\n    this.handleHomeOpen = this.handleHomeOpen.bind(this);\n    this.handleChooseCSV = this.handleChooseCSV.bind(this);\n    this.handleUploadCSV = this.handleUploadCSV.bind(this);\n    this.handleOpOpen = this.handleOpOpen.bind(this);\n    this.handlePromoOpen = this.handlePromoOpen.bind(this);\n    this.handlePromoClose = this.handlePromoClose.bind(this);\n    this.handlePromoSave = this.handlePromoSave.bind(this);\n    this.handleGenerateGroups = this.handleGenerateGroups.bind(this);\n    this.handleUploadGroups = this.handleUploadGroups.bind(this);\n    this.handleGroupsOpen = this.handleGroupsOpen.bind(this);\n    this.handleGroupsChange = this.handleGroupsChange.bind(this);\n  }\n\n  handleHomeOpen() {\n    this.refUploaderCSV.current.value = \"\";\n    this.setState({\n      stage: STAGE.newPromo\n    });\n  }\n\n  handleChooseCSV() {\n    this.refUploaderCSV.current.click();\n  }\n\n  handleUploadCSV(e) {\n    try {\n      let file = e.target.files[0];\n      let reader = new FileReader();\n      reader.onload = async (evt) => {\n        try {\n          let content = evt.target.result;\n          let promo = await csv2promo(content);\n          this.setState({\n            promo,\n            nbGroups: Math.ceil(promo.length / 6),\n            fileName: file.name.split('.').slice(0, -1).join('.')\n          }, this.handlePromoOpen);\n        } catch (e) {\n          console.log(e);\n        }\n      };\n      reader.readAsText(file);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  handlePromoOpen() {\n    this.setState({stage: STAGE.promo});\n  }\n\n  handleOpOpen() {\n    this.setState({stage: STAGE.newGroups});\n  }\n\n  handlePromoClose() {\n    if (this.state.groups.groups.length === 0) {\n      this.handleOpOpen();\n    } else {\n      this.handleGroupsOpen();\n    }\n  }\n\n  handlePromoSave(promo) {\n    this.setState({promo});\n    this.handlePromoClose();\n  }\n\n  async handleGenerateGroups(nbGroups) {\n    const groups = await makeGroups(this.state.promo, nbGroups);\n    this.setState({\n      groups,\n      nbGroups,\n    }, this.handleGroupsOpen);\n  }\n\n  handleUploadGroups(e, handleFail) {\n    try {\n      let file = e.target.files[0];\n      let reader = new FileReader();\n      reader.onload = (evt) => {\n        try {\n          const groups = JSON.parse(decodeURIComponent(evt.target.result));\n\n          this.setState({\n            groups,\n          }, this.handleGroupsOpen);\n        } catch (e) {\n          handleFail();\n        }\n      };\n\n      reader.readAsText(file);\n    } catch (e) {\n      console.log(e);\n      handleFail();\n    }\n  }\n\n  handleGroupsOpen() {\n    this.setState({stage: STAGE.groups});\n  }\n\n  handleGroupsChange(groups) {\n    this.setState({groups});\n  }\n\n  render() {\n    return (\n        <div className=\"App\">\n\n          <input type=\"file\"\n                 id=\"file\"\n                 ref={this.refUploaderCSV}\n                 accept=\"text/csv\"\n                 onChange={this.handleUploadCSV}\n                 hidden/>\n\n          <HomePage key={'home' + this.state.stage}\n                    isOpen={this.state.stage === STAGE.newPromo}\n                    onClick={this.handleChooseCSV}/>\n          <PromoPage key={'promo' + this.state.stage}\n                     students={this.state.promo}\n                     fileName={this.state.fileName}\n                     isOpen={this.state.stage === STAGE.promo}\n                     handleClose={this.handleHomeOpen}\n                     handleSave={this.handlePromoSave}/>\n          <NewGroupsPage key={'op' + this.state.stage}\n                         nbGroups={this.state.nbGroups}\n                         maxNbGroups={this.state.promo.length}\n                         handleUploadGroups={this.handleUploadGroups}\n                         handleGenerateGroups={this.handleGenerateGroups}\n                         isOpen={this.state.stage === STAGE.newGroups}/>\n          <GroupsPage key={'gp' + this.state.stage}\n                      groups={this.state.groups}\n                      promo={this.state.promo}\n                      promoName={this.state.fileName}\n                      handleGroupsChange={this.handleGroupsChange}\n                      handleShowPromo={this.handlePromoOpen}\n                      handleShowOp={this.handleOpOpen}\n                      isOpen={this.state.stage === STAGE.groups}/>\n        </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}