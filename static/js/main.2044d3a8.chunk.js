(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{251:function(e,t,n){e.exports=n(333)},256:function(e,t,n){},259:function(e,t,n){},262:function(e,t,n){},330:function(e,t,n){},331:function(e,t,n){},332:function(e,t,n){},333:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(13),o=n.n(s),i=(n(256),n(39)),l=n.n(i),c=n(62),u=n(44),h=n(45),p=n(47),d=n(46),f=n(30),m=n(48),b=n(258);function g(){return(g=Object(c.a)(l.a.mark(function e(t){var n,a,r,s,o,i,c,u,h,p,d,f,m,g,v,y,k,O,S;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({output:"json"}).fromString(t);case 2:for(n=e.sent,a=[],h=Object.keys(n[0]),p=0,d=h;p<d.length;p++)f=d[p],(m=f.replace(/ /g,"").toUpperCase()).includes("NAME")||m.includes("STUDENT")?r=r||f:m.includes("GENDER")||m.includes("M/F")?s=s||f:m.includes("LEADER")?o=o||f:m.includes("BIO")?i=i||f:m.includes("CHM")?c=c||f:m.includes("PHY")&&(u=u||f);for(g=!0,v=!1,y=void 0,e.prev=9,k=n[Symbol.iterator]();!(g=(O=k.next()).done);g=!0)S=O.value,a.push({name:S[r],gender:S[s],leader:S[o],bio:S[i],chm:S[c],phy:S[u]});e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),v=!0,y=e.t0;case 17:e.prev=17,e.prev=18,g||null==k.return||k.return();case 20:if(e.prev=20,!v){e.next=23;break}throw y;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return",a);case 26:case"end":return e.stop()}},e,null,[[9,13,17,25],[18,,20,24]])}))).apply(this,arguments)}var v=function(e){return g.apply(this,arguments)},y=(n(259),n(94)),k=n(95),O=n(225);function S(){return(S=Object(c.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(O.sha256)(t));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var E=function(e){return S.apply(this,arguments)};function C(e,t){var n=0,a=0,r=0,s=0,o=0,i={bio:0,chm:0,phy:0},l=!0,c=!1,u=void 0;try{for(var h,p=e[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var d=t[h.value];"M"===d.gender?n++:"F"===d.gender&&a++;for(var f=0,m=Object.keys(i);f<m.length;f++){var b=m[f];d[b]&&(i[b]++,"SL"===d[b]?r++:"HL"===d[b]&&s++)}d.leader&&o++}}catch(g){c=!0,u=g}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}return Object(k.a)({nbM:n,nbF:a},i,{nbSL:r,nbHL:s,nbLeader:o})}function j(e,t){var n=C(Object(y.a)(Array(t.length).keys()),t),a=e.length,r=0,s=!0,o=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=C(l.value,t);r+=Math.abs(u.nbM-n.nbM/a),r+=Math.abs(u.nbF-n.nbF/a),r+=Math.abs(u.nbLeader-n.nbLeader/a),r+=Math.abs(u.bio-n.bio/a),r+=Math.abs(u.chm-n.chm/a),r+=Math.abs(u.phy-n.phy/a),r+=Math.abs(u.nbSL-n.nbSL/a),r+=Math.abs(u.nbHL-n.nbHL/a)}}catch(h){o=!0,i=h}finally{try{s||null==c.return||c.return()}finally{if(o)throw i}}return-r}function w(e,t){for(var n=0,a=0;a<e.length;a++)for(var r=0;r<a;r++){var s=C(e[a],t),o=C(e[r],t);n+=Math.abs(s.nbM-o.nbM),n+=Math.abs(s.nbF-o.nbF),n+=Math.abs(s.nbLeader-o.nbLeader),n+=Math.abs(s.bio-o.bio),n+=Math.abs(s.chm-o.chm),n+=Math.abs(s.phy-o.phy),n+=Math.abs(s.nbSL-o.nbSL),n+=Math.abs(s.nbHL-o.nbHL)}return-n}function G(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}}function N(){return(N=Object(c.a)(l.a.mark(function e(t,n){var a,r,s,o,i,c,u,h,p,d,f,m,b,g,v,k,O,S,C,N,M,x;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t.length,G(r=Object(y.a)(Array(a).keys())),s=[],o=0;o<n;o++)s.push([]);for(i=0;i<a;i++)s[i%n].push(r[i]);c=w(s,t),u={a:0,b:0,x:0,y:0},h=[c];case 9:for(p=0;p<n;p++)for(d=0;d<p;d++)for(f=0;f<s[p].length;f++)for(m=0;m<s[d].length;m++)b=[s[d][m],s[p][f]],s[p][f]=b[0],s[d][m]=b[1],(g=w(s,t))>c&&(c=g,u={a:p,b:d,x:f,y:m}),v=[s[d][m],s[p][f]],s[p][f]=v[0],s[d][m]=v[1];if(!(c>h[h.length-1])){e.next=20;break}console.log(c),h.push(c),O=(k=u).a,S=k.b,C=k.x,N=k.y,M=[s[S][N],s[O][C]],s[O][C]=M[0],s[S][N]=M[1],e.next=25;break;case 20:return console.log(j(s,t)),e.next=23,E(JSON.stringify(t));case 23:return x=e.sent,e.abrupt("return",{key:x,groups:s});case 25:e.next=9;break;case 27:case"end":return e.stop()}},e)}))).apply(this,arguments)}var M=function(e,t){return N.apply(this,arguments)},x=n(122),L=n.n(x),U=(n(262),n(184)),P=n(188),R=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(U.a,{fullScreen:!0,className:"homePage",open:this.props.isOpen},r.a.createElement("div",{className:"homePage_button_container"},r.a.createElement(P.a,{color:"primary","aria-label":"Upload list of students",onClick:this.props.onClick,variant:"extended"},r.a.createElement(L.a,null),"Upload list of students")))}}]),t}(r.a.Component),T=n(200),H=n(207),I=n(195),W=n(67),A=n(236),F=n.n(A),J=n(133),V=n.n(J),_=n(226),D=n.n(_);n(330);var B={0:"M",1:"F",2:"Other"},z={0:"",1:"Yes"},Y={0:" ",1:"SL",2:"HL"};var K=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).tableRef=r.a.createRef(),n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=r.a.forwardRef(function(e,t){return r.a.createElement(T.a,Object.assign({direction:"up",ref:t},e))});return r.a.createElement(U.a,{fullScreen:!0,open:this.props.isOpen,onClose:this.props.handleClose,TransitionComponent:t},r.a.createElement(H.a,{className:"tbl-app_bar"},r.a.createElement(I.a,{edge:"start",color:"inherit",onClick:this.props.handleClose,"aria-label":"Close"},r.a.createElement(V.a,null)),r.a.createElement(W.a,{variant:"h5",className:"tbl-title"},"List of Students"),r.a.createElement(I.a,{color:"inherit",onClick:function(){return e.props.handleSave(e.tableRef.current.state.data.map(function(e){return Object(k.a)({},e,{gender:B[e.gender],leader:z[e.leader],bio:Y[e.bio],chm:Y[e.chm],phy:Y[e.phy]})}))}},r.a.createElement(F.a,null))),r.a.createElement($,{ref:this.tableRef,students:this.props.students,fileName:this.props.fileName}))}}]),t}(r.a.Component),$=function(e){function t(e){var n,a;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).TIMEOUT=230,n.state={columns:[{title:"Name",field:"name"},{title:"Gender",field:"gender",lookup:B},{title:"Leadership",field:"leader",lookup:z},{title:"BIO level",field:"bio",lookup:Y},{title:"CHM level",field:"chm",lookup:Y},{title:"PHY level",field:"phy",lookup:Y}],data:(a=e.students,a.map(function(e){return Object(k.a)({},e,{gender:"M"===e.gender?0:"F"===e.gender?1:2,leader:void 0!==e.leader&&e.leader?1:0,bio:"HL"===e.bio?2:"SL"===e.bio?1:0,chm:"HL"===e.chm?2:"SL"===e.chm?1:0,phy:"HL"===e.phy?2:"SL"===e.phy?1:0})}))},n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(D.a,{title:this.props.fileName,columns:this.state.columns,data:this.state.data,options:{addRowPosition:"first",exportButton:!0,exportAllData:!0,filtering:!0,pageSize:10},editable:{onRowAdd:function(t){return new Promise(function(n,a){setTimeout(function(){var a=e.state.data;a.push(t),e.setState({data:a},function(){return n()}),n()},e.TIMEOUT)})},onRowUpdate:function(t,n){return new Promise(function(a,r){setTimeout(function(){var r=e.state.data,s=r.indexOf(n);r[s]=t,e.setState({data:r},function(){return a()}),a()},e.TIMEOUT)})},onRowDelete:function(t){return new Promise(function(n,a){setTimeout(function(){var a=e.state.data,r=a.indexOf(t);a.splice(r,1),e.setState({data:a},function(){return n()}),n()},e.TIMEOUT)})}}})}}]),t}(r.a.Component),q=K,Q=(n(331),n(205)),X=n(237),Z=n.n(X),ee=n(238),te=n.n(ee),ne=n(239),ae=n.n(ne),re=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={focus:"",clicked:"",nbGroups:e.nbGroups},n.refUploaderText=r.a.createRef(),n.handleMouseLeave=n.handleMouseLeave.bind(Object(f.a)(n)),n.handleClickLeft=n.handleClickLeft.bind(Object(f.a)(n)),n.handleClickRight=n.handleClickRight.bind(Object(f.a)(n)),n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"handleMouseEnter",value:function(e){this.setState({focus:e})}},{key:"handleMouseLeave",value:function(){this.setState({focus:""})}},{key:"getClassName",value:function(e){var t;return t=""===this.state.focus?"":e===this.state.focus?"gp-focus":"gp-blur",this.state.clicked===e&&(t="gp-focus active"),t}},{key:"handleClickLeft",value:function(){var e=this;this.state.clicked||this.setState({clicked:"left"},function(){return e.refUploaderText.current.click()})}},{key:"handleClickRight",value:function(){var e=this;this.state.clicked||(this.setState({clicked:"right"}),setTimeout(function(){return e.props.handleGenerateGroups(e.state.nbGroups)},100))}},{key:"canIncrementNb",value:function(){return this.state.nbGroups+1<=this.props.maxNbGroups}},{key:"canDecrementNb",value:function(){return this.state.nbGroups-1>0}},{key:"incrementNb",value:function(){this.setState({nbGroups:this.state.nbGroups+1})}},{key:"decrementNb",value:function(){this.setState({nbGroups:this.state.nbGroups-1})}},{key:"render",value:function(){var e=this;return r.a.createElement(U.a,{fullScreen:!0,open:this.props.isOpen},r.a.createElement("input",{type:"file",id:"file",ref:this.refUploaderText,accept:"text/plain",onChange:this.props.handleUploadGroups,hidden:!0}),r.a.createElement("div",{id:"gp-container"},r.a.createElement(se,{id_:"gp-upload",className_:"gp-action "+this.getClassName("left"),handleFocus:function(){return e.handleMouseEnter("left")},handleBlur:this.handleMouseLeave.bind(this)},r.a.createElement(L.a,{className:"svg_icon clickable",onMouseEnter:function(){return e.handleMouseEnter("left")},onMouseLeave:this.handleMouseLeave,onClick:this.handleClickLeft}),r.a.createElement("h1",{className:"gp-desc"},"Upload Groups")),r.a.createElement(se,{id_:"gp-generate",className_:"gp-action "+this.getClassName("right")},r.a.createElement(Z.a,{className:"svg_icon clickable",onMouseEnter:function(){return e.handleMouseEnter("right")},onMouseLeave:this.handleMouseLeave,onClick:this.handleClickRight}),r.a.createElement("h1",{className:"gp-desc "},"Generate ",this.state.nbGroups," Groups"),r.a.createElement("div",{className:"gp-toolbar"},r.a.createElement(P.a,{color:"primary",disabled:!this.canIncrementNb(),onClick:function(){return e.incrementNb()}},r.a.createElement(te.a,null)),r.a.createElement(P.a,{color:"secondary",disabled:!this.canDecrementNb(),onClick:function(){return e.decrementNb()}},r.a.createElement(ae.a,null))))),r.a.createElement(Q.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:"right"===this.state.clicked,message:r.a.createElement("span",null,"Processing ...")}))}}]),t}(r.a.Component),se=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id_,className:this.props.className_},r.a.createElement("div",{className:"gp-table"},r.a.createElement("div",{className:"gp-child"},this.props.children)))}}]),t}(r.a.Component),oe=re,ie=n(245),le=n(192),ce=n(193),ue=n(203),he=n(204),pe=n(194),de=n(173),fe=n(199),me=n(241),be=n.n(me),ge=n(244),ve=n.n(ge),ye=n(242),ke=n.n(ye),Oe=n(243),Se=n.n(Oe),Ee=n(181),Ce=n.n(Ee),je=n(240),we=n.n(je);n(332);function Ge(e,t){return null===e||null===t?e===t:e.i===t.i&&e.j===t.j}function Ne(e,t){return e.gender===t.gender&&e.leader===t.leader&&e.bio===t.bio&&e.chm===t.chm&&e.phy===t.phy}var Me=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={lastSavedGroups:n.props.groups,history:[n.props.groups],i:0,selected1:null,selected2:null,highlighted:[],isSaveWarningOpen:!1},n.refDownload=r.a.createRef(),E(JSON.stringify(n.props.promo)).then(function(e){n.setState({key:e})}),n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"groups",value:function(){return this.state.history[this.state.i]}},{key:"clearGroups",value:function(){this.props.handleGroupsChange({groups:[],key:""}),this.props.handleShowOp()}},{key:"saveGroups",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.props.handleGroupsChange(this.groups()),this.setState({lastSavedGroups:this.groups()}),e&&this.showSaveWarning()}},{key:"showSaveWarning",value:function(){this.setState({isSaveWarningOpen:!0})}},{key:"hideSaveWarning",value:function(){this.setState({isSaveWarningOpen:!1})}},{key:"downloadGroups",value:function(){this.saveGroups(!1),this.refDownload.current.click()}},{key:"findIdsOfSameProfile",value:function(e){var t=this.props.promo[e],n=[],a=!0,r=!1,s=void 0;try{for(var o,i=this.props.promo.entries()[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var l=o.value,c=Object(ie.a)(l,2),u=c[0],h=c[1];u!==e&&Ne(t,h)&&n.push(u)}}catch(p){r=!0,s=p}finally{try{a||null==i.return||i.return()}finally{if(r)throw s}}return n}},{key:"handleStudentClick",value:function(e,t){var n,a,r,s={i:e,j:t},o=this.groups().groups[e][t];null===this.state.selected1?(n=s,a=null):Ge(s,this.state.selected1)?(n=null,a=null):this.state.highlighted.includes(o)?(n=this.state.selected1,a=s):(n=s,a=null),r=null!==n&&null===a?this.findIdsOfSameProfile(this.groups().groups[n.i][n.j]):[],this.setState({selected1:n,selected2:a,highlighted:r})}},{key:"canSwap",value:function(){return null!==this.state.selected1&&null!==this.state.selected2}},{key:"canUndo",value:function(){return this.state.i-1>=0}},{key:"canRedo",value:function(){return this.state.i+1<=this.state.history.length-1}},{key:"handleUndo",value:function(){this.setState({i:this.state.i-1})}},{key:"handleRedo",value:function(){this.setState({i:this.state.i+1})}},{key:"handleSwap",value:function(){var e=JSON.parse(JSON.stringify(this.groups().groups)),t=this.state.selected1,n=this.state.selected2,a=[e[n.i][n.j],e[t.i][t.j]];e[t.i][t.j]=a[0],e[n.i][n.j]=a[1];var r=this.state.i+1,s=[].concat(Object(y.a)(this.state.history.slice(0,r)),[{key:this.groups().key,groups:e}]);this.setState({i:r,history:s,selected1:null,selected2:null,highlighted:[]})}},{key:"render",value:function(){var e=this;return r.a.createElement(U.a,{fullScreen:!0,open:this.props.isOpen},r.a.createElement("a",{hidden:!0,ref:this.refDownload,href:"data: text/plain; charset=utf-8,".concat(encodeURIComponent(JSON.stringify(this.groups()))),download:"".concat(this.props.promoName,"_groups.txt")},JSON.stringify(this.groups())),r.a.createElement(le.a,{position:"sticky"},r.a.createElement(H.a,{className:"gps-toolbar"},r.a.createElement(I.a,{color:"inherit",onClick:this.clearGroups.bind(this)},r.a.createElement(V.a,null)),r.a.createElement(W.a,{variant:"h5",className:"gps-title"},"Groups of",r.a.createElement(ce.a,{color:"inherit"},r.a.createElement(W.a,{variant:"h5",onClick:this.props.handleShowPromo,className:"gps-button-desc"},"Students"),r.a.createElement(we.a,null))),r.a.createElement(I.a,{color:"inherit",disabled:JSON.stringify(this.state.lastSavedGroups)===JSON.stringify(this.groups()),onClick:this.saveGroups.bind(this)},r.a.createElement(be.a,null)),r.a.createElement(I.a,{color:"inherit",disabled:!this.canUndo(),onClick:this.handleUndo.bind(this)},r.a.createElement(ke.a,null)),r.a.createElement(I.a,{color:"inherit",disabled:!this.canRedo(),onClick:this.handleRedo.bind(this)},r.a.createElement(Se.a,null)),r.a.createElement(I.a,{color:"inherit",onClick:this.downloadGroups.bind(this)},r.a.createElement(Ce.a,null)))),r.a.createElement("div",{className:"gps-container"},this.groups().groups.map(function(t,n){return r.a.createElement(xe,{key:JSON.stringify(t),groupNb:n,groupIds:t,promo:e.props.promo,selected1:e.state.selected1,selected2:e.state.selected2,highlighted:e.state.highlighted,handleClick:e.handleStudentClick.bind(e)})})),r.a.createElement("div",{className:"gps-fab-container"},r.a.createElement(P.a,{variant:"extended",color:"secondary",disabled:!this.canSwap(),onClick:this.handleSwap.bind(this)},r.a.createElement(ve.a,null),"Swap!")),r.a.createElement(Q.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.isSaveWarningOpen,onClose:this.hideSaveWarning.bind(this),message:r.a.createElement("span",null,"Groups saved UNTIL this tab is closed. Use ",r.a.createElement(Ce.a,null)," to download the groups."),action:r.a.createElement(ce.a,{color:"secondary",onClick:this.hideSaveWarning.bind(this)},"OK")}),r.a.createElement(Q.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.groups().key!==this.state.key,message:r.a.createElement("span",null,"The list of students has changed!"),action:r.a.createElement(ce.a,{color:"secondary",onClick:this.clearGroups.bind(this)},"Go back")}))}}]),t}(r.a.Component),xe=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"isSelected",value:function(e){var t={i:this.props.groupNb,j:e};return Ge(t,this.props.selected1)||Ge(t,this.props.selected2)}},{key:"isHighlighted",value:function(e){return this.props.highlighted.includes(e)}},{key:"getPersonBox",value:function(e,t){var n=this,a=this.props.promo[e].name;return r.a.createElement(ue.a,{button:!0,className:this.isHighlighted(e)?"gps-highlighted":"",selected:this.isSelected(t),key:e+"/"+t,divider:t!==this.props.groupIds.length-1,onClick:function(){return n.props.handleClick(n.props.groupNb,t)}},r.a.createElement(he.a,{primary:a}))}},{key:"render",value:function(){var e=this;return r.a.createElement(pe.a,{className:"gps-box"},r.a.createElement(de.a,null,r.a.createElement(W.a,{variant:"h5",className:"gps-box-title"},"Group ",String.fromCharCode(65+this.props.groupNb)),r.a.createElement(fe.a,{variant:"middle"}),this.props.groupIds.map(function(t,n){return e.getPersonBox(t,n)})))}}]),t}(r.a.Component),Le=Me,Ue={newPromo:0,promo:1,newGroups:2,groups:3},Pe=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={nbGroups:10,groups:{key:"",groups:[]},fileName:"IB Students",promo:[],stage:Ue.newPromo},n.refUploaderCSV=r.a.createRef(),n.handleHomeOpen=n.handleHomeOpen.bind(Object(f.a)(n)),n.handleChooseCSV=n.handleChooseCSV.bind(Object(f.a)(n)),n.handleUploadCSV=n.handleUploadCSV.bind(Object(f.a)(n)),n.handleOpOpen=n.handleOpOpen.bind(Object(f.a)(n)),n.handlePromoOpen=n.handlePromoOpen.bind(Object(f.a)(n)),n.handlePromoClose=n.handlePromoClose.bind(Object(f.a)(n)),n.handlePromoSave=n.handlePromoSave.bind(Object(f.a)(n)),n.handleGenerateGroups=n.handleGenerateGroups.bind(Object(f.a)(n)),n.handleUploadGroups=n.handleUploadGroups.bind(Object(f.a)(n)),n.handleGroupsOpen=n.handleGroupsOpen.bind(Object(f.a)(n)),n.handleGroupsChange=n.handleGroupsChange.bind(Object(f.a)(n)),n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"handleHomeOpen",value:function(){this.refUploaderCSV.current.value="",this.setState({stage:Ue.newPromo})}},{key:"handleChooseCSV",value:function(){this.refUploaderCSV.current.click()}},{key:"handleUploadCSV",value:function(e){var t=this;try{var n=e.target.files[0],a=new FileReader;a.onload=function(){var e=Object(c.a)(l.a.mark(function e(a){var r,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.target.result,e.next=3,v(r);case 3:s=e.sent,t.setState({promo:s,nbGroups:Math.ceil(s.length/6),fileName:n.name.split(".").slice(0,-1).join(".")},t.handlePromoOpen);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.readAsText(n)}catch(e){console.log(e)}}},{key:"handlePromoOpen",value:function(){this.setState({stage:Ue.promo})}},{key:"handleOpOpen",value:function(){this.setState({stage:Ue.newGroups})}},{key:"handlePromoClose",value:function(){0===this.state.groups.groups.length?this.handleOpOpen():this.handleGroupsOpen()}},{key:"handlePromoSave",value:function(e){this.setState({promo:e}),this.handlePromoClose()}},{key:"handleGenerateGroups",value:function(){var e=Object(c.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(this.state.promo,t);case 2:n=e.sent,this.setState({groups:n,nbGroups:t},this.handleGroupsOpen);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleUploadGroups",value:function(e){var t=this;try{var n=e.target.files[0],a=new FileReader;a.onload=function(e){var n=JSON.parse(decodeURIComponent(e.target.result));t.setState({groups:n},t.handleGroupsOpen)},a.readAsText(n)}catch(e){console.log(e)}}},{key:"handleGroupsOpen",value:function(){this.setState({stage:Ue.groups})}},{key:"handleGroupsChange",value:function(e){this.setState({groups:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("input",{type:"file",id:"file",ref:this.refUploaderCSV,accept:"text/csv",onChange:this.handleUploadCSV,hidden:!0}),r.a.createElement(R,{key:"home"+this.state.stage,isOpen:this.state.stage===Ue.newPromo,onClick:this.handleChooseCSV}),r.a.createElement(q,{key:"promo"+this.state.stage,students:this.state.promo,fileName:this.state.fileName,isOpen:this.state.stage===Ue.promo,handleClose:this.handleHomeOpen,handleSave:this.handlePromoSave}),r.a.createElement(oe,{key:"op"+this.state.stage,nbGroups:this.state.nbGroups,maxNbGroups:this.state.promo.length,handleUploadGroups:this.handleUploadGroups,handleGenerateGroups:this.handleGenerateGroups,isOpen:this.state.stage===Ue.newGroups}),r.a.createElement(Le,{key:"gp"+this.state.stage,groups:this.state.groups,promo:this.state.promo,promoName:this.state.fileName,handleGroupsChange:this.handleGroupsChange,handleShowPromo:this.handlePromoOpen,handleShowOp:this.handleOpOpen,isOpen:this.state.stage===Ue.groups}))}}]),t}(r.a.Component),Re=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Te(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(Pe,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/group-m4ker",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/group-m4ker","/service-worker.js");Re?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Te(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Te(t,e)})}}()}},[[251,1,2]]]);
//# sourceMappingURL=main.2044d3a8.chunk.js.map